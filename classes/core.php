<?php

$er = 1;

$action = false;

date_default_timezone_set("Africa/Cairo");

ini_set('display_errors', $er);

ini_set('display_startup_errors', $er);

if ($er) {

	error_reporting(E_ERROR);
}

require("JavascriptMinifier.phpclass");

require("CssMinifier.phpclass");

class core extends mysqli

{

	/*

	 Class  variables :

	 $err     => Stores errors generated by running any of the class functions.

	 */

	var $err;

	var $errAr;

	//***************************************************************************************

	var $server = "localhost";

	var $db = "smartzoom";

	var $username = "root";

	var $password = '';

	var $dbConnection;

	var $dbError;

	var $dbQuery;

	var $fullUrl;

	var $isAdmin;

	public function __construct($host = "", $user = "", $pass = "", $db = "")

	{

		$this->dbConnection = new mysqli($this->server, $this->username, $this->password, $this->db);

		if ($this->dbConnection->connect_error) {

			$this->setError($this->dbConnection->connect_error);

			$this->setErrorAr("خطأ بالاتصال : يرجى الرجوع لمدير الموقع");

			return false;
		} else {

			$this->DBquery("SET NAMES utf8");
		}

		$this->fullUrl =  $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];

		$this->isAdmin =   (strpos($this->fullUrl, "admin") !== false);
	}

	public function __destruct()

	{

		$this->dbConnection->close();
	}
	function getLev($lev)
	{
		switch ($lev) {
			case 0:
				return "مستخدم";
				break;
			case 1:
				return "مدير";
				break;
			case 2:
				return "محرر";
				break;
			default:
				return "مبيعات";
				break;
		}
	}
	private function DBquery($query)

	{

		$qs = explode(";", $query);

		foreach ($qs as $q) {

			if (!trim($q))

				continue;

			$result = $this->dbConnection->query($q);

			if (!$result) {

				$this->setError($this->dbConnection->connect_error);

				$this->setErrorAr("خطأ بالاستعلام : يرجى الرجوع لمدير الموقع");

				return false;
			}
		}

		return $result;
	}

	function DBsetError()

	{

		$this->dbError = array($this->dbConnection->connect_errno, $this->dbConnection->connect_error);
	}

	function DBgetError()

	{

		return $this->dbError;
	}

	//***************************************************************************************

	/*

	 Function name : setError

	 Description   : Used by the class functions to inform about any errors happened during execution

	 time.

	 Parameters    : $err => string of the error description.

	 Return        : none

	 TODO          : Function should be expanded to send critical errors alerts to administrator mobile.

	 */

	function setError($err)

	{

		$this->err = $err;
	}

	//***************************************************************************************

	/*

	 Function name : getError

	 Description   : Get information about last error happened during execution time.

	 Parameters    : none

	 Return        : none

	 */

	function getError()

	{

		return $this->err;
	}

	//***************************************************************************************

	/*

	 Function name : setError

	 Description   : Used by the class functions to inform about any errors happened during execution

	 time.

	 Parameters    : $err => string of the error description.

	 Return        : none

	 TODO          : Function should be expanded to send critical errors alerts to administrator mobile.

	 */

	function setErrorAr($err)

	{

		$this->errAr = $err;
	}

	//***************************************************************************************

	/*

	 Function name : getError

	 Description   : Get information about last error happened during execution time.

	 Parameters    : none

	 Return        : none

	 */

	function getErrorAr()

	{

		return $this->errAr;
	}

	//***************************************************************************************

	function getData($tp = "", $where = "", $w = "*")

	{

		$condition = "";

		$query = "select $w from `$tp`  $where";

		$result = $this->DBquery("$query $condition");

		if (mysqli_num_rows($result)) {

			$info = array();

			while ($data =  mysqli_fetch_assoc($result)) {

				$info[] = $data;
			}

			return $info;
		}

		return false;
	}

	//***************************************************************************************

	//***************************************************************************************

	function compress($source, $destination, $quality)

	{

		$info = getimagesize($source);

		if ($info['mime'] == 'image/jpeg')

			$image = imagecreatefromjpeg($source);

		elseif ($info['mime'] == 'image/gif')

			$image = imagecreatefromgif($source);

		elseif ($info['mime'] == 'image/png')

			$image = imagecreatefrompng($source);

		imagejpeg($image, $destination, $quality);

		return $destination;
	}

	//***************************************************************************************

	function getStaticPage($page)

	{

		$query = "SELECT * FROM `static`";

		$condition = "";

		if (!empty($page['code'])) {

			if (mysqli_real_escape_string($this->dbConnection, $page['code']) != $page['code']) {

				$this->setError("Invalid page.");

				return false;
			}

			$condition .= " code = '$page[code]'";
		}

		if (!empty($condition))

			$query .= " WHERE ";

		$result = $this->DBquery("$query $condition");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error getting page information. : " . $err["1"]);

			return false;
		}

		$pages = array();

		$info = array();

		while ($data =  mysqli_fetch_assoc($result)) {

			$info[] = $data;
		}

		/*		while ($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

			$page["id"] = $columns["id"];

			$page["code"] = $columns["code"];

			$page["english"] = $columns["english"];

			$page["arabic"] = $columns["arabic"];

			$page["icon"] = $columns["icon"];

			array_push($pages, $page);

		}*/

		//mysqli_free_result($result);

		return $info;
	}

	//***************************************************************************************

	function convert_datetime($str)

	{

		list($date, $time) = explode(' ', $str);

		list($year, $month, $day) = explode('-', $date);

		list($hour, $minute, $second) = explode(':', $time);

		$timestamp = mktime($hour, $minute, $second, $month, $day, $year);

		return $timestamp;
	}

	//***************************************************************************************

	function convert_date($str)

	{

		list($year, $month, $day) = explode('-', $str);

		$timestamp = mktime(0, 0, 0, $month, $day, $year);

		return $timestamp;
	}

	//***************************************************************************************

	function getjops($jop)

	{

		$query = "SELECT * FROM `jops`";

		$condition = "";

		if (array_key_exists("counter", $jop)) {

			$query = "SELECT count(*) FROM `jops`";
		}

		if (array_key_exists("begin", $jop)) {

			$jop["begin"] = (int)$jop["begin"];

			$query .= " LIMIT $jop[begin]";

			if (array_key_exists("length", $jop)) {

				$param["length"] = (int)$jop["length"];

				$query .= ", $jop[length] ";
			}
		}

		$result = $this->DBquery("$query $condition ");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getjops.");

			return false;
		}

		if (array_key_exists("counter", $jop)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$jops = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$jop["jopid"] = $columns["jopid"];

			$jop["jopname"] = $columns["jopname"];

			$jop["jopdetial"] = $columns["jopdetial"];

			$jop["date"] = $columns["date"];

			array_push($jops, $jop);
		}

		mysqli_free_result($result);

		return $jops;
	}

	//***************************************************************************************

	/*

	 function getnews($newspaaaarm) {

	 $query = "SELECT  * FROM `news`";

	 if(array_key_exists("counter", $newspaaaarm)) {

	 $query = "SELECT count(*) FROM `news`";

	 }

	 $condition = "active = 1 ";

	 if (array_key_exists('id', $newspaaaarm)) {

	 $newspaaaarm["id"] = (int)$newspaaaarm["id"];

	 $condition .= "and  id = $newspaaaarm[id]";

	 }

	 if(!empty($condition)) {

	 $query .= " WHERE ";

	 } else {

	 }

	 //	$condition .= "active = 1 ";

	 if($condition) $query .= " $condition order by `order`";

	 if(array_key_exists("begin", $newspaaaarm)) {

	 $newspaaaarm["begin"] = (int) $newspaaaarm["begin"];

	 $query .= " LIMIT $newspaaaarm[begin]";

	 if(array_key_exists("length", $newspaaaarm)) {

	 $newspaaaarm["length"] = (int) $newspaaaarm["length"];

	 $query .= ", $newspaaaarm[length]";

	 }

	 }

	 $result = $this->DBquery("$query");

	 if(!$result) {

	 $err = $this -> DBgetError();

	 $this -> setError("Error : " . $err["1"]);

	 $this -> setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

	 return false;

	 }

	 if(array_key_exists("counter", $newspaaaarm)) {

	 while($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

	 return $columns["count(*)"];

	 }

	 }

	 $news = array();

	 while($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

	 $ne["id"]        		= $columns["id"];

	 $ne["name"]           = $columns["name"];

	 $ne["tittle"]           = $columns["tittle"];

	 $ne["detials"]          = $columns["detials"];

	 $ne["date_start"]            = $columns["date_start"];

	 $ne["date_end"]            = $columns["date_end"];

	 $ne["active"]           = $columns["active"];

	 array_push($news, $ne);

	 }

	 mysqli_free_result($result);

	 return $news;

	 }

	 //***************************************************************************************

	 function getnewsimages($imagespaaaarm) {

	 $query = "SELECT  * FROM `news_images`";

	 $condition = "active = 1 ";

	 if (array_key_exists('news_id', $imagespaaaarm)) {

	 $imagespaaaarm["news_id"] = (int)$imagespaaaarm["news_id"];

	 $condition .= "and  news_id = $imagespaaaarm[news_id]";

	 }

	 if(!empty($condition)) {

	 $query .= " WHERE ";

	 } else {

	 }

	 //	$condition .= "active = 1 ";

	 if($condition) $query .= " $condition order by `order`";

	 $result = $this->DBquery("$query");

	 if(!$result) {

	 $err = $this -> DBgetError();

	 $this -> setError("Error : " . $err["1"]);

	 $this -> setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

	 return false;

	 }

	 $images = array();

	 while($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

	 $img["id"]        		= $columns["id"];

	 $img["image"]           = $columns["image"];

	 $img["order"]           = $columns["order"];

	 $img["active"]          = $columns["active"];

	 $img["news_id"]         = $columns["news_id"];

	 array_push($images, $img);

	 }

	 mysqli_free_result($result);

	 return $images;

	 }

	 */

	//***************************************************************************************

	/*function getcategory($param) {

	 $query = "SELECT  * FROM `category`";

	 if(array_key_exists("counter", $param)) {

	 $query = "SELECT count(*) FROM `category`";

	 }

	 $condition = "active = 1";

	 if(array_key_exists('id', $param)){

	 $param["id"] = (int) $param["id"];

	 $condition .= " and id = $param[id]";

	 }

	 if(!empty($condition)) {

	 $query .= " WHERE ";

	 }

	 if($condition) $query .= " $condition  ";

	 $query = $query."order by `order` asc ";

	 if(array_key_exists("begin", $param)) {

	 $param["begin"] = (int) $param["begin"];

	 $query .= " LIMIT $param[begin]";

	 if(array_key_exists("length", $param)) {

	 $param["length"] = (int) $param["length"];

	 $query .= ", $param[length] ";

	 }

	 }

	 $result = $this->DBquery("$query ");

	 if(!$result) {

	 $err = $this -> DBgetError();

	 $this -> setError("Error : " . $err["1"]);

	 $this -> setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

	 return false;

	 }

	 if(array_key_exists("counter", $param)) {

	 while($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

	 return $columns["count(*)"];

	 }

	 }

	 $category = array();

	 while($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

	 $cat["id"]        		= $columns["id"];

	 $cat["name"]   = $columns["name"];

	 $cat["description"]	= $columns["description"];

	 $cat["order"]		= $columns["order"];

	 $cat["active"]		= $columns["active"];

	 array_push($category, $cat);

	 }

	 mysqli_free_result($result);

	 return $category;

	 }*/

	//***************************************************************************************

	function getsubcategory($param)

	{

		$query = "SELECT  * FROM `subcategory`";

		if (array_key_exists("counter", $param)) {

			$query = "SELECT count(*) FROM `subcategory`";
		}

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= "and  id = $param[id]";
		}

		if (array_key_exists('category_id', $param)) {

			$param["category_id"] = (int)$param["category_id"];

			$condition .= "and  category_id = $param[category_id]";
		}

		if (array_key_exists('special', $param)) {

			$param["special"] = (int)$param["special"];

			$condition .= "and special = $param[special]";
		}

		if (array_key_exists('discount_price', $param)) {

			$param["discount_price"] = (int)$param["discount_price"];

			$condition .= "and discount_price != 0 ";
		}

		if (array_key_exists('name', $param)) {

			$param["name"] = mysqli_real_escape_string($this->dbConnection, $param["name"]);

			$condition .= "and name LIKE  '%$param[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		if (array_key_exists("begin", $param)) {

			$param["begin"] = (int)$param["begin"];

			$query .= " LIMIT $param[begin]";

			if (array_key_exists("length", $param)) {

				$param["length"] = (int)$param["length"];

				$query .= ", $param[length] ";
			}
		}

		// echo $query;

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$subcategory = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$cat["id"] = $columns["id"];

			$cat["name"] = $columns["name"];

			$cat["image"] = $columns["image"];

			$cat["price"] = $columns["price"];

			$cat["discount_price"] = $columns["discount_price"];

			$cat["description"] = $columns["description"];

			$cat["active"] = $columns["active"];

			$cat["order"] = $columns["order"];

			$cat["special"] = $columns["special"];

			$cat["category_id"] = $columns["category_id"];

			array_push($subcategory, $cat);
		}

		mysqli_free_result($result);

		return $subcategory;
	}

	//***************************************************************************************

	function getproduct($param)

	{

		$query = "SELECT  * FROM `products`";

		if (array_key_exists("counter", $param)) {

			$query = "SELECT count(*) FROM `products`";
		}

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= " and id = $param[id]";
		}

		if (array_key_exists('subcategory_id', $param)) {

			$param["subcategory_id"] = (int)$param["subcategory_id"];

			$condition .= " and subcategory_id = $param[subcategory_id]";
		}

		if (array_key_exists('discount_price', $param)) {

			$param["discount_price"] = (int)$param["discount_price"];

			$condition .= "and discount_price != 0 ";
		}

		if (array_key_exists('name', $param)) {

			$param["name"] = mysqli_real_escape_string($this->dbConnection, $param["name"]);

			$condition .= "and name LIKE  '%$param[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		if (array_key_exists("begin", $param)) {

			$param["begin"] = (int)$param["begin"];

			$query .= " LIMIT $param[begin]";

			if (array_key_exists("length", $param)) {

				$param["length"] = (int)$param["length"];

				$query .= ", $param[length] ";
			}
		}

		//echo $query;

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$products = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$cat["id"] = $columns["id"];       */

			/*$cat["name"] = $columns["name"];

			$cat["image"] = $columns["image"];

			$cat["pdf"] = $columns["pdf"];

			$cat["yotuobe"] = $columns["yotuobe"];

			$cat["price"] = $columns["price"];

			$cat["discount_price"] = $columns["discount_price"];

			$cat["description"] = $columns["description"];

			$cat["sale"] = $columns["sale"];

			$cat["new"] = $columns["new"];

			$cat["order"] = $columns["order"];

			$cat["active"] = $columns["active"];

			$cat["subcategory_id"] = $columns["subcategory_id"];

			array_push($products, $cat);*/

			$products[] = $columns;
		}

		mysqli_free_result($result);

		return $products;
	}

	//***************************************************************************************

	function getproductimages($param)

	{

		$query = "SELECT  * FROM `product_images`";

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= " and id = $param[id]";
		}

		if (array_key_exists('product', $param)) {

			$param["product"] = (int)$param["product"];

			$condition .= " and product_id = $param[product]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["product"] = $columns["product"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function gethomeBlock($param)

	{

		$query = "SELECT  * FROM `home_block`";

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= " and id = $param[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$images[] = $columns;

			/*	$img["image"] = $columns["image"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["product"] = $columns["product"];

			array_push($images, $img);*/
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function getCat2($param)

	{

		$query = "SELECT  * FROM `categories`";

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= " and id = $param[id]";
		}

		if (array_key_exists('level', $param)) {

			$param["level"] = (int)$param["level"];

			$condition .= " and level = $param[level]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$images[] = $columns;

			/*	$img["image"] = $columns["image"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["product"] = $columns["product"];

			array_push($images, $img);*/
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function expiry_date($data, $def = "stock")

	{

		if ($data[0]["expiry_date"] && $data[0]["deal"]) {

			$def = (time() > strtotime($data[0]["expiry_date"]) ? $def : "");
		}

		return "";
	}

	function getStaff($param)

	{

		$query = "SELECT  * FROM `staff`";

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= " and id = $param[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$images[] = $columns;

			/*	$img["image"] = $columns["image"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["product"] = $columns["product"];

			array_push($images, $img);*/
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function getaboutItem($param)

	{

		$query = "SELECT  * FROM `about_item`";

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= " and id = $param[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$images[] = $columns;

			/*	$img["image"] = $columns["image"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["product"] = $columns["product"];

			array_push($images, $img);*/
		}

		mysqli_free_result($result);

		return $images;
	}

	function getservices_images($param)

	{

		$query = "SELECT  * FROM `services_images`";

		$condition = "active = 1 ";

		if (array_key_exists('id', $param)) {

			$param["id"] = (int)$param["id"];

			$condition .= " and id = $param[id]";
		}

		if (array_key_exists('services_id', $param)) {

			$param["services_id"] = (int)$param["services_id"];

			$condition .= " and services_id = $param[services_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		if ($condition)

			$query .= " $condition  ";

		$query = $query . "order by `order` asc ";

		$result = $this->DBquery("$query ");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproject.");

			return false;
		}

		if (array_key_exists("counter", $param)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["services_id"] = $columns["services_id"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function getprojecttypes($pam)

	{

		$query = "SELECT * FROM `project_type`";

		$condition = " active = 1";

		if (array_key_exists('id', $pam)) {

			$pam["id"] = (int)$pam["id"];

			$condition .= " and id = $pam[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojecttypes.");

			return false;
		}

		$types = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$typ["id"] = $columns["id"];

			$typ["name_english"] = $columns["name_english"];

			$typ["name_arabic"] = $columns["name_arabic"];

			$typ["image"] = $columns["image"];

			$typ["order"] = $columns["order"];

			$typ["active"] = $columns["active"];

			array_push($types, $typ);
		}

		mysqli_free_result($result);

		return $types;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprojectpurpose($pam)

	{

		$query = "SELECT * FROM `project_purpose`";

		$condition = " active = 1";

		if (array_key_exists('id', $pam)) {

			$pam["id"] = (int)$pam["id"];

			$condition .= " and id = $pam[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectpurpose.");

			return false;
		}

		$types = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$typ["id"] = $columns["id"];

			$typ["name_english"] = $columns["name_english"];

			$typ["name_arabic"] = $columns["name_arabic"];

			$typ["order"] = $columns["order"];

			$typ["active"] = $columns["active"];

			array_push($types, $typ);
		}

		mysqli_free_result($result);

		return $types;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprojectlocation($pam)

	{

		$query = "SELECT * FROM `project_location`";

		$condition = " active = 1";

		if (array_key_exists('id', $pam)) {

			$pam["id"] = (int)$pam["id"];

			$condition .= " and id = $pam[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectpurpose.");

			return false;
		}

		$types = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$typ["id"] = $columns["id"];

			$typ["name_english"] = $columns["name_english"];

			$typ["name_arabic"] = $columns["name_arabic"];

			$typ["order"] = $columns["order"];

			$typ["active"] = $columns["active"];

			array_push($types, $typ);
		}

		mysqli_free_result($result);

		return $types;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprojectimage($pam)

	{

		$query = "SELECT * FROM `project_images`";

		$condition = " active = 1";

		if (array_key_exists('id', $pam)) {

			$pam["id"] = (int)$pam["id"];

			$condition .= " and id = $pam[id]";
		}

		if (array_key_exists('project', $pam)) {

			$pam["project"] = (int)$pam["project"];

			$condition .= " and project = $pam[project]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimage.");

			return false;
		}

		$types = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$typ["id"] = $columns["id"];

			$typ["image"] = $columns["image"];

			$typ["project"] = $columns["project"];

			$typ["order"] = $columns["order"];

			$typ["active"] = $columns["active"];

			array_push($types, $typ);
		}

		mysqli_free_result($result);

		return $types;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprojectsss($pam)

	{

		$query = "SELECT * FROM `projects`";

		$condition = " active = 1";

		if (array_key_exists('id', $pam)) {

			$pam["id"] = (int)$pam["id"];

			$condition .= " and id = $pam[id]";
		}

		if (array_key_exists('special_right', $pam)) {

			$pam["special_right"] = (int)$pam["special_right"];

			$condition .= " and special_right = $pam[special_right]";
		}

		if (array_key_exists('special_left', $pam)) {

			$pam["special_left"] = (int)$pam["special_left"];

			$condition .= " and special_left = $pam[special_left]";
		}

		if (array_key_exists('project_type', $pam)) {

			$pam["project_type"] = (int)$pam["project_type"];

			$condition .= " and project_type = $pam[project_type]";
		}

		if (array_key_exists('name', $pam)) {

			$pam["name"] = mysqli_real_escape_string($this->dbConnection, $pam["name"]);

			$condition .= " and ( name_english LIKE  '%$pam[name]%' or name_arabic LIKE '%$pam[name]%'  ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojects.");

			return false;
		}

		$types = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$typ["id"] = $columns["id"];

			$typ["name_english"] = $columns["name_english"];

			$typ["name_arabic"] = $columns["name_arabic"];

			$typ["descrption_english"] = $columns["descrption_english"];

			$typ["descrption_arabic"] = $columns["descrption_arabic"];

			$typ["price"] = $columns["price"];

			$typ["area"] = $columns["area"];

			$typ["image"] = $columns["image"];

			$typ["video"] = $columns["video"];

			$typ["pdf"] = $columns["pdf"];

			$typ["category"] = $columns["category"];

			$typ["special_right"] = $columns["special_right"];

			$typ["special_left"] = $columns["special_left"];

			$typ["project_type"] = $columns["project_type"];

			$typ["project_purpose"] = $columns["project_purpose"];

			$typ["project_location"] = $columns["project_location"];

			$typ["order"] = $columns["order"];

			$typ["active"] = $columns["active"];

			array_push($types, $typ);
		}

		mysqli_free_result($result);

		return $types;
	}

	//***************************************************************************************

	function getprojectinternalimages($par)

	{

		$query = "SELECT  * FROM `project_internal_images`";

		$condition = "";

		if (array_key_exists('pid', $par)) {

			$par["pid"] = (int)$par["pid"];

			$condition .= "pid = $par[pid]";
		} else {

			if (array_key_exists('criteria', $par)) {

				$par["criteria"] = mysqli_real_escape_string($this->dbConnection, $par["criteria"]);

				$condition .= " newsname LIKE  '%$par[criteria]%' or Components LIKE '%$par[criteria]%' ";
			}
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		} else {

			if (array_key_exists('orderby', $param)) {

				$param['orderby'] = mysqli_real_escape_string($this->dbConnection, $param['orderby']);

				$query .= " order by `$param[orderby]`  desc";
			} else {

				$query .= " order by `order` desc";
			}
		}

		$result = $this->DBquery("$query $condition");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$images_internal = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["images_id"] = $columns["images_id"];

			$img["images_name"] = $columns["images_name"];

			$img["pid"] = $columns["pid"];

			array_push($images_internal, $img);
		}

		mysqli_free_result($result);

		return $images_internal;
	}

	//***************************************************************************************

	function getprojectreport($parm)

	{

		$query = "SELECT  * FROM `reportofyear`";

		$condition = "";

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$reports = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$repo["id"] = $columns["id"];

			$repo["report-name"] = $columns["report-name"];

			$repo["report-image"] = $columns["report-image"];

			$repo["report-view"] = $columns["report-view"];

			$repo["report-download"] = $columns["report-download"];

			array_push($reports, $repo);
		}

		mysqli_free_result($result);

		return $reports;
	}

	//***************************************************************************************

	function getprojectimages($parm)

	{

		$query = "SELECT  * FROM `Project_images`";

		$condition = "";

		if (array_key_exists('pid', $parm)) {

			$parm["pid"] = (int)$parm["pid"];

			$condition .= "pid = $parm[pid]";
		} else {

			if (array_key_exists('criteria', $parm)) {

				$parm["criteria"] = mysqli_real_escape_string($this->dbConnection, $parm["criteria"]);

				$condition .= " newsname LIKE  '%$parm[criteria]%' or Components LIKE '%$parm[criteria]%' ";
			}
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		} else {

			if (array_key_exists('orderby', $param)) {

				$param['orderby'] = mysqli_real_escape_string($this->dbConnection, $param['orderby']);

				$query .= " order by `$param[orderby]`  desc";
			} else {

				$query .= " order by `images_id` desc";
			}
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["images_id"] = $columns["images_id"];

			$img["images_name"] = $columns["images_name"];

			$img["order"] = $columns["order"];

			$img["pid"] = $columns["pid"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function getserviceimages($prarm)

	{

		$query = "SELECT  * FROM `servicesimages`";

		$condition = "";

		if (array_key_exists('service_id', $prarm)) {

			$prarm["service_id"] = (int)$prarm["service_id"];

			$condition .= "service_id = $prarm[service_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["images_id"] = $columns["images_id"];

			$img["image_name"] = $columns["image_name"];

			$img["service_id"] = $columns["service_id"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//**********************************************************************************************

	function getlocation($paam)

	{

		$query = "SELECT * FROM `location`";

		$condition = "";

		if (array_key_exists('location_id', $paam)) {

			$paam["location_id"] = (int)$paam["location_id"];

			$condition .= "where location_id = $paam[location_id]";
		}

		$result = $this->DBquery("$query $condition ");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getjops.");

			return false;
		}

		$locations = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$loc["location_id"] = $columns["location_id"];

			$loc["location_name"] = $columns["location_name"];

			array_push($locations, $loc);
		}

		mysqli_free_result($result);

		return $locations;
	}

	//************************************************************************************************************

	function SqlDel($tp = "", $condition = "")

	{

		$query = " DELETE FROM `" . $tp . "` ";

		$result = $this->DBquery("$query $condition");

		return $result;
	}

	function SqlIn($tp = "", $data = "", $f = false)

	{

		global $DBcon;

		if (is_array($data)) {

			$keys = '';

			$values = '';

			$i = count($data);

			foreach ($data as $key => $value) {

				$value =  str_replace('"', "'", $value);

				if ($key == "password" and !$f) {

					$value = md5($value);
				}

				if ($i == 1) {

					$keys .= '`' . $key . '`';

					$values .=  " '" . str_replace("'", '"', $value) . "'";
				} else {

					$keys .= '`' . $key . '`,';

					$values .= " '" . str_replace("'", '"', $value) . "',";
				}

				$i--;
			}

			$sql = "insert into `$tp` ($keys) values ($values)";

			$DBcon = $this->dbConnection;

			$Add = mysqli_query($DBcon, $sql);

			if ($Add) {

				$id =  mysqli_insert_id($DBcon);

				return $id;
			} else {

				//die();

				$this->dbError = mysqli_error($DBcon);

				return false;
			}
		}

		return false;
	}

	function ip()

	{

		$alt_ip = $_SERVER['REMOTE_ADDR'];

		if (isset($_SERVER['HTTP_CLIENT_IP'])) {

			$alt_ip = $_SERVER['HTTP_CLIENT_IP'];
		} elseif (isset($_SERVER['HTTP_X_FORWARDED_FOR']) and preg_match_all('#\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}#s', $_SERVER['HTTP_X_FORWARDED_FOR'], $matches)) {

			foreach ($matches[0] as $ip) {

				if (!preg_match("#^(10|172\.16|192\.168)\.#", $ip)) {

					$alt_ip = $ip;

					break;
				}
			}
		} elseif (isset($_SERVER['HTTP_FROM'])) {

			$alt_ip = $_SERVER['HTTP_FROM'];
		}

		return $alt_ip;
	}

	function Cinst($tb, $arm, $wr)

	{

		if ($this->Sel($tb, $wr)) {

			$sq = $this->UpDate($tb, $arm, null, $wr);
		} else {

			$sq = $this->SqlIn($tb, $arm, true);
		}

		return $sq;
	}

	function isView($pid = false, $get = false)

	{

		if ($get) {

			return $this->Num("views", "where pid=" . $pid);
		}

		if (!$pid)

			$pid = $this->isv("id");

		$sel = $this->Sel("posts", "where id=" . $pid);

		$this->Cinst("views", array("pid" => $pid, "ip" => $this->ip(), "date" => time()), "where  ip='" . $this->ip() . "' and   pid=" . $pid);

		$this->UpDate("posts", "view", $sel->view + 1, "where id=" . $pid);
	}

	function Num($tp = '', $w = '')

	{

		$DBcon =  $this->dbConnection;

		$tp = strtolower($tp);

		$Sql =  mysqli_query($DBcon, "select * from $tp $w");

		if ($Sql) {

			return  mysqli_num_rows($Sql);
		} else {

			return  false;
		}
	}

	function Sel($tp = "", $w = '')

	{

		$DBcon = $this->dbConnection;

		$tp = strtolower($tp);

		$Sql =  mysqli_query($DBcon, "select * from $tp $w");

		if ($Sql) {

			$N = mysqli_fetch_object($Sql);

			return  $N;
		} else {

			return false;
		}
	}

	function UpDate($tb = "", $name = "", $data = "", $where = "")

	{

		$DBcon = $this->dbConnection;

		$tb = strtolower($tb);

		if (is_array($name)) {

			$keys = "";

			$values = "";

			$i = count($name);

			foreach ($name as $key => $value) {

				$sql = $this->UpDate($tb, $key, $value, $where);

				$i--;
			}
		} else {

			if ($name == "password") {

				$data = md5($data);
			}

			$sql =  mysqli_query($DBcon, 'update `' . $tb . '` set `' . $name . '`="' . $data . '" ' . $where);
		}

		if ($sql) {

			return true;
		} else {

			return false;
		}
	}

	//************************************************************************************************************

	function addUser($user)

	{

		$mandatory = array("name", "address", "email", "cvpath", "jopid");

		$strings = array("name" => true, "address" => true, "governorate" => false, "city" => false, "telephone" => false, "mobile" => false, "email" => true, "birthdate" => false, "nationality" => false, "kind" => false, "children" => false, "license" => false, "car" => false, "academic" => false, "marital_status" => false, "military" => false, "job" => false, "cvpath" => true, "jopid" => true);

		/*	$ints = array(

		 "country" => true,

		 "speciality" => false,

		 "speciality_non_physician" => false,

		 "governorate" => true,

		 "region" => true

		 );*/

		$cols = "";

		$vals = "";

		foreach ($strings as $index => $required) {

			if ($required) {

				if (!array_key_exists($index, $user) || !$user["$index"]) {

					$this->setError("Invalid " . ucwords(str_replace("_", " ", $index)));

					return false;
				}

				$user["$index"] = mysqli_real_escape_string($this->dbConnection, $user["$index"]);
			} else {

				if (!array_key_exists($index, $user)) {

					$user["$index"] = "";
				} else {

					$user["$index"] = mysqli_real_escape_string($this->dbConnection, $user["$index"]);
				}
			}

			if ($cols)

				$cols .= ", $index ";

			else

				$cols = "$index ";

			if ($vals)

				$vals .= ", '$user[$index]'";

			else

				$vals = "'$user[$index]'";
		}

		foreach ($ints as $index => $required) {

			if ($required) {

				if (array_key_exists($index, $user)) {

					if (!is_numeric($user["$index"])) {

						$this->setError("Invalid " . ucwords(str_replace("_", " ", $index)));

						return false;
					}
				} else {

					if (in_array($index, $mandatory)) {

						$this->setError("Invalid " . ucwords(str_replace("_", " ", $index)));

						return false;
					}

					$user["$index"] = 0;
				}

				$user["$index"] = $user["$index"];
			} else {

				if (!array_key_exists($index, $user)) {

					$user["$index"] = 0;
				} else {

					$user["$index"] = (int)$user["$index"];
				}
			}

			if ($cols)

				$cols .= ", $index ";

			else

				$cols = "$index ";

			if ($vals)

				$vals .= ", $user[$index]";

			else

				$vals = "$user[$index]";
		}

		$query = "INSERT INTO `cvjops` ($cols) VALUES ($vals)";

		$result = $this->DBquery("$query");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			if ($err["0"] == 1062) {

				$key = substr($err["1"], strlen($err["1"]) - 2, strlen($err["1"]) - 1);

				$this->setError("username or e-mail already exists. Please, Choose

						another one.");

				$this->setErrorAr("اسم الحساب او البريد الالكترونى مسجل بالفعل.

						يرجى اختيار غيرهم.");
			} else {

				$this->setError("Error creating your account. : " . $err["1"]);

				$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع,

						addUser.");
			}

			return false;
		}

		$result = $this->DBquery("select last_insert_id()");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error creating your account : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع,

					addUser.");

			return false;
		}

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$id = $columns["last_insert_id()"];
		}

		mysqli_free_result($result);

		return $id;
	}

	//***************************************************************************************

	function getbanars($paaaarm)

	{

		$query = "SELECT  * FROM `banners`";

		$condition = "";

		if (!empty($condition)) {

			$query .= " WHERE ";
		} else {
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$banars = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$banr["banner_id"] = $columns["banner_id"];

			$banr["banner_image"] = $columns["banner_image"];

			$banr["order"] = $columns["order"];

			array_push($banars, $banr);
		}

		mysqli_free_result($result);

		return $banars;
	}

	//*****************************************************************************************

	function getEngines($engine)

	{

		$query = "SELECT * FROM `searchengine`";

		$condition = "";

		if (!empty($engine['page'])) {

			if (mysqli_real_escape_string($this->dbConnection, $engine['page']) != $engine['page']) {

				$this->setError("Invalid page.");

				return false;
			}

			$condition .= " where  page = '$engine[page]'";
		}

		if (!empty($engine['title'])) {

			if (mysqli_real_escape_string($this->dbConnection, $engine['title']) != $engine['title']) {

				$this->setError("Invalid page.");

				return false;
			}

			$condition .= " where  title = '$engine[title]'";
		}

		$result = $this->DBquery("$query $condition ");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع,

					getEngines.");

			return false;
		}

		$engines = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$engine["id"] = $columns["id"];

			$engine["page"] = $columns["page"];

			$engine["description"] = $columns["description"];

			$engine["keywords"] = $columns["keywords"];

			$engine["title"] = $columns["title"];

			array_push($engines, $engine);
		}

		mysqli_free_result($result);

		return $engines;
	}

	///***************************************************************************************

	function getslider($profpram)

	{

		$query = "SELECT * FROM `slider`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		//while ($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

		while ($columns = mysqli_fetch_assoc($result)) {

			/*			$slid["id"] = $columns["id"];

			$slid["image"] = $columns["image"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];*/

			$slider[] = $columns;

			// array_push($slider, $slid);

		}

		//mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getpopup_center($sliderpram)

	{

		$query = "SELECT * FROM `popup_center`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["image"] = $columns["image"];

			$slid["link"] = $columns["link"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getalpa_advertising($sliderpram)

	{

		$query = "SELECT * FROM `alpa_advertising`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["image_arabic"] = $columns["image_arabic"];

			$slid["image_english"] = $columns["image_english"];

			$slid["link_arabic"] = $columns["link_arabic"];

			$slid["link_english"] = $columns["link_english"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getcompany_advertising($sliderpram)

	{

		$query = "SELECT * FROM `company_advertising`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["image"] = $columns["image"];

			$slid["link_arabic"] = $columns["link_arabic"];

			$slid["link_english"] = $columns["link_english"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getslider_img($sliderpram)

	{

		$query = "SELECT * FROM `slider_img`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if (!empty($profpram['master_color'])) {

			$profpram['master_color'] = (int)$profpram['master_color'];

			$condition .= "and  master_color = $profpram[master_color]";
		}

		if (!empty($profpram['game_images'])) {

			$profpram['game_images'] = (int)$profpram['game_images'];

			$condition .= "and  game_images = $profpram[game_images]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["game_images"] = $columns["game_images"];

			$slid["master_color"] = $columns["master_color"];

			$slid["image"] = $columns["image"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getgame_images($game_imagespram)

	{

		$query = "SELECT * FROM `game_images`";

		$condition = "active = 1 ";

		if (!empty($game_imagespram['id'])) {

			$game_imagespram['id'] = (int)$game_imagespram['id'];

			$condition .= "and  id = $game_imagespram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgame_images.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["name"] = $columns["name"];

			$slid["image"] = $columns["image"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getmaster_color($sliderpram)

	{

		$query = "SELECT * FROM `master_color`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["color"] = $columns["color"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getbarck($sliderpram)

	{

		$query = "SELECT * FROM `barck`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["image"] = $columns["image"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	///***************************************************************************************

	function getwallpaper($sliderpram)

	{

		$query = "SELECT * FROM `wallpaper`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$slider = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$slid["id"] = $columns["id"];

			$slid["image"] = $columns["image"];

			$slid["order"] = $columns["order"];

			$slid["active"] = $columns["active"];

			array_push($slider, $slid);
		}

		mysqli_free_result($result);

		return $slider;
	}

	///***************************************************************************************

	function getcompany($sliderpram)

	{

		$query = "SELECT * FROM `company`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$companyies = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$comp["id"] = $columns["id"];

			$comp["image"] = $columns["image"];

			$comp["link"] = $columns["link"];

			$comp["order"] = $columns["order"];

			$comp["active"] = $columns["active"];

			array_push($companyies, $comp);
		}

		mysqli_free_result($result);

		return $companyies;
	}

	//***************************************************************************************

	//***************************************************************************************

	function addemail($emailpram)

	{

		$query = "SELECT  * FROM `visitors`";

		$email = "";

		if (array_key_exists('email', $emailpram)) {

			$email = mysqli_real_escape_string($this->dbConnection, $emailpram["email"]);
		}

		$vals = "'" . $email . "'";

		$query = "INSERT INTO `visitors`(`email`) VALUES ($vals)";

		$result = $this->DBquery("$query");

		return $result;
	}

	//***************************************************************************************

	function getinfo_media($info_media)

	{

		$query = "SELECT * FROM `info_media`";

		$condition = "";

		if (!empty($info_media['code'])) {

			if (mysqli_real_escape_string($this->dbConnection, $info_media['code']) != $info_media['code']) {

				$this->setError("Invalid page.");

				return false;
			}

			$condition .= " code = '$info_media[code]'";
		}

		if (!empty($condition))

			$query .= " WHERE ";

		$result = $this->DBquery("$query $condition");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error getting page information. : " . $err["1"]);

			return false;
		}

		$medias = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$med["id"] = $columns["id"];

			$med["code"] = $columns["code"];

			$med["link"] = $columns["link"];

			array_push($medias, $med);
		}

		mysqli_free_result($result);

		return $medias;
	}

	//***************************************************************************************

	function getagents($parm)

	{

		$query = "SELECT  * FROM `agents`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= "id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["link"] = $columns["link"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function getsupplier($parm)

	{

		$query = "SELECT  * FROM `supplier`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$supplier = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$sup["id"] = $columns["id"];

			$sup["image"] = $columns["image"];

			$sup["name"] = $columns["name"];

			$sup["description"] = $columns["description"];

			$sup["order"] = $columns["order"];

			$sup["active"] = $columns["active"];

			array_push($supplier, $sup);
		}

		mysqli_free_result($result);

		return $supplier;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getactivities($parm)

	{

		$query = "SELECT  * FROM `activities`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('supplier_id', $parm)) {

			$parm["supplier_id"] = (int)$parm["supplier_id"];

			$condition .= " and supplier_id = $parm[supplier_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$activities = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$active["id"] = $columns["id"];

			$active["name"] = $columns["name"];

			$active["image"] = $columns["image"];

			$active["description"] = $columns["description"];

			$active["order"] = $columns["order"];

			$active["active"] = $columns["active"];

			$active["supplier_id"] = $columns["supplier_id"];

			array_push($activities, $active);
		}

		mysqli_free_result($result);

		return $activities;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getsubactivities($parm)

	{

		$query = "SELECT  * FROM `subactivities`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('active_id', $parm)) {

			$parm["active_id"] = (int)$parm["active_id"];

			$condition .= " and active_id = $parm[active_id]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and  name LIKE  '%$parm[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$subactivities = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$subactive["id"] = $columns["id"];

			$subactive["name"] = $columns["name"];

			$subactive["image"] = $columns["image"];

			$subactive["description"] = $columns["description"];

			$subactive["pdf"] = $columns["pdf"];

			$subactive["order"] = $columns["order"];

			$subactive["active"] = $columns["active"];

			$subactive["active_id"] = $columns["active_id"];

			array_push($subactivities, $subactive);
		}

		mysqli_free_result($result);

		return $subactivities;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getsubactivitiesimages($parm)

	{

		$query = "SELECT  * FROM `subactivities_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('subactivities_id', $parm)) {

			$parm["subactivities_id"] = (int)$parm["subactivities_id"];

			$condition .= " and subactivities_id = $parm[subactivities_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$subactivities = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$subactive["id"] = $columns["id"];

			$subactive["image"] = $columns["image"];

			$subactive["order"] = $columns["order"];

			$subactive["active"] = $columns["active"];

			$subactive["subactivities_id"] = $columns["subactivities_id"];

			array_push($subactivities, $subactive);
		}

		mysqli_free_result($result);

		return $subactivities;
	}

	//***************************************************************************************

	///***************************************************************************************

	function getclient($profpram)

	{

		$query = "SELECT * FROM `logo`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["logo"] = $columns["logo"];

			$log["link"] = $columns["link"];

			$log["linkarabic"] = $columns["linkarabic"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	///***************************************************************************************

	function getcertificates($profpram)

	{

		$query = "SELECT * FROM `certificates`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if (!empty($profpram['certificates_category'])) {

			$profpram['certificates_category'] = (int)$profpram['certificates_category'];

			$condition .= "and  certificates_category = $profpram[certificates_category]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting certificates information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getcertificates.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["name"] = $columns["name"];

			$log["name_arabic"] = $columns["name_arabic"];

			$log["image"] = $columns["image"];

			$log["description"] = $columns["description"];

			$log["description_arabic"] = $columns["description_arabic"];

			$log["file"] = $columns["file"];

			$log["certificates_category"] = $columns["certificates_category"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	///***************************************************************************************

	function geteducation($profpram)

	{

		$query = "SELECT * FROM `education`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting certificates information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, geteducation.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["name"] = $columns["name"];

			$log["name_arabic"] = $columns["name_arabic"];

			$log["description"] = $columns["description"];

			$log["description_arabic"] = $columns["description_arabic"];

			$log["file"] = $columns["file"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	///***************************************************************************************

	function getfaq($profpram)

	{

		$query = "SELECT * FROM `faq`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting certificates information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getfaq.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["name"] = $columns["name"];

			$log["name_arabic"] = $columns["name_arabic"];

			$log["description"] = $columns["description"];

			$log["description_arabic"] = $columns["description_arabic"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	///***************************************************************************************

	function getcasestudies($profpram)

	{

		$query = "SELECT * FROM `case_studies`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting certificates information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getcasestudies.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["name"] = $columns["name"];

			$log["name_arabic"] = $columns["name_arabic"];

			$log["description"] = $columns["description"];

			$log["description_arabic"] = $columns["description_arabic"];

			$log["file"] = $columns["file"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	///***************************************************************************************

	function getdownloads($profpram)

	{

		$query = "SELECT * FROM `downloads`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting downloads information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getdownloads.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["name"] = $columns["name"];

			$log["name_arabic"] = $columns["name_arabic"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	///***************************************************************************************

	function getsub_downloads($profpram)

	{

		$query = "SELECT * FROM `sub_downloads`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if (!empty($profpram['downloads'])) {

			$profpram['downloads'] = (int)$profpram['downloads'];

			$condition .= "and  downloads = $profpram[downloads]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting certificates information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getsub_downloads.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["name"] = $columns["name"];

			$log["name_arabic"] = $columns["name_arabic"];

			$log["downloads"] = $columns["downloads"];

			$log["file"] = $columns["file"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	///***************************************************************************************

	function getwarranty_image($profpram)

	{

		$query = "SELECT * FROM `warranty_image`";

		$condition = "active = 1 ";

		if (!empty($profpram['id'])) {

			$profpram['id'] = (int)$profpram['id'];

			$condition .= "and  id = $profpram[id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting warranty_image information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getwarranty_image.");

			return false;
		}

		$logo = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$log["id"] = $columns["id"];

			$log["image"] = $columns["image"];

			$log["order"] = $columns["order"];

			$log["active"] = $columns["active"];

			array_push($logo, $log);
		}

		mysqli_free_result($result);

		return $logo;
	}

	//***************************************************************************************

	//***************************************************************************************

	/*	function getfaq($pramfaq) {

		$query = "SELECT * FROM `FAQ`";

		$condition = "active = 1 ";

		if (!empty($pramfaq['id'])) {

			$pramfaq['id'] = (int)$pramfaq['id'];

			$condition .= "and  id = $pramfaq[id]";

		}

		if (!empty($pramfaq['special'])) {

			$pramfaq['special'] = (int)$pramfaq['special'];

			$condition .= "and  special = $pramfaq[special]";

		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this -> DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this -> DBsetError();

			$err = $this -> DBgetError();

			$this -> setError("Error getting categories information. : " . $err["1"]);

			$this -> setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;

		}

		$faqs = array();

		while ($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

			$faq["id"] = $columns["id"];

			$faq["question_english"] = $columns["question_english"];

			$faq["question_arabic"] = $columns["question_arabic"];

			$faq["description_english"] = $columns["description_english"];

			$faq["description_arabic"] = $columns["description_arabic"];

			$faq["order"] = $columns["order"];

			$faq["special"] = $columns["special"];

			$faq["active"] = $columns["active"];

			array_push($faqs, $faq);

		}

		mysqli_free_result($result);

		return $faqs;

	}*/

	//***************************************************************************************

	function addorder($labels)

	{

		$query = "SELECT  * FROM `careers`";

		$name = "";

		$national_number = "";

		$product = "";

		$email = "";

		$telephone = "";

		$address = "";

		$subject = "";

		$comments = "";

		if (array_key_exists('name', $labels)) {

			$name = mysqli_real_escape_string($this->dbConnection, $labels["name"]);
		}

		if (array_key_exists('national_number', $labels)) {

			$national_number = mysqli_real_escape_string($this->dbConnection, $labels["national_number"]);
		}

		if (array_key_exists('product', $labels)) {

			$product = mysqli_real_escape_string($this->dbConnection, $labels["product"]);
		}

		if (array_key_exists('email', $labels)) {

			$email = mysqli_real_escape_string($this->dbConnection, $labels["email"]);
		}

		if (array_key_exists('telephone', $labels)) {

			$telephone = mysqli_real_escape_string($this->dbConnection, $labels["telephone"]);
		}

		if (array_key_exists('address', $labels)) {

			$address = mysqli_real_escape_string($this->dbConnection, $labels["address"]);
		}

		if (array_key_exists('subject', $labels)) {

			$subject = mysqli_real_escape_string($this->dbConnection, $labels["subject"]);
		}

		if (array_key_exists('comments', $labels)) {

			$comments = mysqli_real_escape_string($this->dbConnection, $labels["comments"]);
		}

		$vals = "'" . $name . "','" . $national_number . "','" . $product . "','" . $email . "','" . $telephone . "','" . $address . "','" . $subject . "','" . $comments . "'";

		$query = "INSERT INTO `order`(`name`,`national_number`,`product`,`email`,`telephone`,`address`,`subject`,`comments`) VALUES ($vals)";

		$result = $this->DBquery("$query");

		return $result;
	}

	//***************************************************************************************

	//***************************************************************************************

	//***************************************************************************************

	//***************************************************************************************

	function getsubservices($pramsubservices)

	{

		$query = "SELECT * FROM `sub_services`";

		$condition = "active = 1 ";

		if (!empty($pramsubservices['id'])) {

			$pramsubservices['id'] = (int)$pramsubservices['id'];

			$condition .= "and  id = $pramsubservices[id]";
		}

		if (!empty($pramsubservices['service_id'])) {

			$pramsubservices['service_id'] = (int)$pramsubservices['service_id'];

			$condition .= "and  service_id = $pramsubservices[service_id]";
		}

		if (array_key_exists('name', $pramsubservices)) {

			$pramsubservices["name"] = mysqli_real_escape_string($this->dbConnection, $pramsubservices["name"]);

			$condition .= "and name_english LIKE  '%$pramsubservices[name]%' or name_arabic LIKE  '%$pramsubservices[name]%'";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		// echo $query . $condition . " order by order asc";

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$subservices = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$subserv["id"] = $columns["id"];

			$subserv["name_english"] = $columns["name_english"];

			$subserv["name_arabic"] = $columns["name_arabic"];

			$subserv["description_english"] = $columns["description_english"];

			$subserv["description_arabic"] = $columns["description_arabic"];

			$subserv["image"] = $columns["image"];

			$subserv["service_id"] = $columns["service_id"];

			$subserv["order"] = $columns["order"];

			$subserv["active"] = $columns["active"];

			array_push($subservices, $subserv);
		}

		mysqli_free_result($result);

		return $subservices;
	}

	//***************************************************************************************

	function getsubservicesimages($pramsubservicesimages)

	{

		$query = "SELECT * FROM `sub_services_images`";

		$condition = "active = 1 ";

		if (!empty($pramsubservicesimages['id'])) {

			$pramsubservicesimages['id'] = (int)$pramsubservicesimages['id'];

			$condition .= "and  id = $pramsubservicesimages[id]";
		}

		if (!empty($pramsubservicesimages['sub_services_id'])) {

			$pramsubservicesimages['sub_services_id'] = (int)$pramsubservicesimages['sub_services_id'];

			$condition .= "and  sub_services_id = $pramsubservicesimages[sub_services_id]";
		}

		if ($condition)

			$query .= " WHERE ";

		//"active=1 and ";

		//echo $query . $condition;

		$result = $this->DBquery("$query $condition  order by `order` asc");

		//print "$query $condition order by `order` asc";

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getCategories.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["sub_services_id"] = $columns["sub_services_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function getnews($newspaaaarm)

	{

		$query = "SELECT  * FROM `news`";

		if (array_key_exists("counter", $newspaaaarm)) {

			$query = "SELECT count(*) FROM `news`";
		}

		$condition = "active = 1 ";

		if (array_key_exists('id', $newspaaaarm)) {

			$newspaaaarm["id"] = (int)$newspaaaarm["id"];

			$condition .= "and  id = $newspaaaarm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		} else {
		}

		//	$condition .= "active = 1 ";

		if ($condition)

			$query .= " $condition order by `order`";

		if (array_key_exists("begin", $newspaaaarm)) {

			$newspaaaarm["begin"] = (int)$newspaaaarm["begin"];

			$query .= " LIMIT $newspaaaarm[begin]";

			if (array_key_exists("length", $newspaaaarm)) {

				$newspaaaarm["length"] = (int)$newspaaaarm["length"];

				$query .= ", $newspaaaarm[length]";
			}
		}

		$result = $this->DBquery("$query");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		if (array_key_exists("counter", $newspaaaarm)) {

			while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

				return $columns["count(*)"];
			}
		}

		$news = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$ne["id"] = $columns["id"];

			$ne["tittle_english"] = $columns["tittle_english"];

			$ne["detials_english"] = $columns["detials_english"];

			$ne["tittle_arabic"] = $columns["tittle_arabic"];

			$ne["detials_arabic"] = $columns["detials_arabic"];

			$ne["smoll_description_english"] = $columns["smoll_description_english"];

			$ne["smoll_description_arabic"] = $columns["smoll_description_arabic"];

			$ne["image"] = $columns["image"];

			$ne["date"] = $columns["date"];

			$ne["order"] = $columns["order"];

			$ne["active"] = $columns["active"];

			array_push($news, $ne);
		}

		mysqli_free_result($result);

		return $news;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getnewsimage($parm)

	{

		$query = "SELECT  * FROM `news_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('news_id', $parm)) {

			$parm["news_id"] = (int)$parm["news_id"];

			$condition .= " and news_id = $parm[news_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition."order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["news_id"] = $columns["news_id"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getdistance($parm)

	{

		$query = "SELECT  * FROM `distance`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition."order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$distances = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$dist["id"] = $columns["id"];

			$dist["name_english"] = $columns["name_english"];

			$dist["name_france"] = $columns["name_france"];

			$dist["distance"] = $columns["distance"];

			$dist["order"] = $columns["order"];

			$dist["active"] = $columns["active"];

			array_push($distances, $dist);
		}

		mysqli_free_result($result);

		return $distances;
	}

	//***************************************************************************************

	//***************************************************************************************

	function addtraveltours($labels)

	{

		$query = "SELECT  * FROM `request_tour`";

		$tittle = "";

		$full_name = "";

		$Phone = "";

		$email = "";

		$Nationality = "";

		$no_of_children = "";

		$no_of_adults = "";

		$approximate_date_travel = "";

		$length_of_stay = "";

		$preferred_accommodations = "";

		$Comments = "";

		if (array_key_exists('tittle', $labels)) {

			$tittle = mysqli_real_escape_string($this->dbConnection, $labels["tittle"]);
		}

		if (array_key_exists('full_name', $labels)) {

			$full_name = mysqli_real_escape_string($this->dbConnection, $labels["full_name"]);
		}

		if (array_key_exists('Phone', $labels)) {

			$Phone = mysqli_real_escape_string($this->dbConnection, $labels["Phone"]);
		}

		if (array_key_exists('email', $labels)) {

			$email = mysqli_real_escape_string($this->dbConnection, $labels["email"]);
		}

		if (array_key_exists('nationality', $labels)) {

			$nationality = mysqli_real_escape_string($this->dbConnection, $labels["nationality"]);
		}

		if (array_key_exists('no_of_children', $labels)) {

			$no_of_children = mysqli_real_escape_string($this->dbConnection, $labels["no_of_children"]);
		}

		if (array_key_exists('no_of_adults', $labels)) {

			$no_of_adults = mysqli_real_escape_string($this->dbConnection, $labels["no_of_adults"]);
		}

		if (array_key_exists('approximate_date_travel', $labels)) {

			$approximate_date_travel = mysqli_real_escape_string($this->dbConnection, $labels["approximate_date_travel"]);
		}

		if (array_key_exists('length_of_stay', $labels)) {

			$length_of_stay = mysqli_real_escape_string($this->dbConnection, $labels["length_of_stay"]);
		}

		if (array_key_exists('preferred_accommodations', $labels)) {

			$preferred_accommodations = mysqli_real_escape_string($this->dbConnection, $labels["preferred_accommodations"]);
		}

		if (array_key_exists('Comments', $labels)) {

			$Comments = mysqli_real_escape_string($this->dbConnection, $labels["Comments"]);
		}

		$vals = "'" . $tittle . "','" . $full_name . "','" . $Phone . "','" . $email . "','" . $nationality . "','" . $no_of_children . "','" . $no_of_adults . "','" . $approximate_date_travel . "','" . $length_of_stay . "','" . $preferred_accommodations . "','" . $Comments . "'";

		$query = "INSERT INTO `request_tour`(`tittle`,`full_name`,`Phone`,`email`,`Nationality`,`no_of_children`,`no_of_adults`,`approximate_date_travel`,`length_of_stay`,`preferred_accommodations`,`Comments`) VALUES ($vals)";

		$result = $this->DBquery("$query");

		return $result;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getegyptcity($parm)

	{

		$query = "SELECT  * FROM `egypt_city`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$egyptcity = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$egyptcit["id"] = $columns["id"];

			$egyptcit["name_english"] = $columns["name_english"];

			$egyptcit["name_france"] = $columns["name_france"];

			$egyptcit["description_english"] = $columns["description_english"];

			$egyptcit["description_france"] = $columns["description_france"];

			$egyptcit["order"] = $columns["order"];

			$egyptcit["active"] = $columns["active"];

			array_push($egyptcity, $egyptcit);
		}

		mysqli_free_result($result);

		return $egyptcity;
	}

	//***************************************************************************************

	//***************************************************************************************

	function gettravel_packages($parm)

	{

		$query = "SELECT  * FROM `travel_packages`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$travelpackages = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$travelpackt["id"] = $columns["id"];

			$travelpackt["name_english"] = $columns["name_english"];

			$travelpackt["name_france"] = $columns["name_france"];

			$travelpackt["order"] = $columns["order"];

			$travelpackt["active"] = $columns["active"];

			array_push($travelpackages, $travelpackt);
		}

		mysqli_free_result($result);

		return $travelpackages;
	}

	//***************************************************************************************

	//***************************************************************************************

	function gettravels($parm)

	{

		$query = "SELECT  * FROM `travels`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('trave_package_id', $parm)) {

			$parm["trave_package_id"] = (int)$parm["trave_package_id"];

			$condition .= " and trave_package_id = $parm[trave_package_id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('last_special', $parm)) {

			$parm["last_special"] = (int)$parm["last_special"];

			$condition .= " and last_special = $parm[last_special]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name_english LIKE  '%$parm[name]%' or name_france LIKE '%$parm[name]%' )";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$travels = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$trav["id"] = $columns["id"];

			$trav["name_english"] = $columns["name_english"];

			$trav["name_france"] = $columns["name_france"];

			$trav["image"] = $columns["image"];

			$trav["description_english"] = $columns["description_english"];

			$trav["description_france"] = $columns["description_france"];

			$trav["stars"] = $columns["stars"];

			$trav["price"] = $columns["price"];

			$trav["order"] = $columns["order"];

			$trav["active"] = $columns["active"];

			$trav["trave_package_id"] = $columns["trave_package_id"];

			$trav["special"] = $columns["special"];

			$trav["last_special"] = $columns["last_special"];

			array_push($travels, $trav);
		}

		mysqli_free_result($result);

		return $travels;
	}

	//***************************************************************************************

	//***************************************************************************************

	function gettravelsimages($parm)

	{

		$query = "SELECT  * FROM `travels_image`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('travel_id', $parm)) {

			$parm["travel_id"] = (int)$parm["travel_id"];

			$condition .= " and travel_id = $parm[travel_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["travel_id"] = $columns["travel_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function addregister_event($labels)

	{

		$query = "SELECT  * FROM `register_event`";

		$event = "";

		$Company_Name = "";

		$Contact_Person = "";

		$Job_Title = "";

		$Address = "";

		$PO_Box = "";

		$city = "";

		$countary = "";

		$Telephone = "";

		$Fax = "";

		$Email = "";

		if (array_key_exists('event', $labels)) {

			$event = (int)$labels["event"];
		}

		if (array_key_exists('Company_Name', $labels)) {

			$Company_Name = mysqli_real_escape_string($this->dbConnection, $labels["Company_Name"]);
		}

		if (array_key_exists('Contact_Person', $labels)) {

			$Contact_Person = mysqli_real_escape_string($this->dbConnection, $labels["Contact_Person"]);
		}

		if (array_key_exists('Job_Title', $labels)) {

			$Job_Title = mysqli_real_escape_string($this->dbConnection, $labels["Job_Title"]);
		}

		if (array_key_exists('Address', $labels)) {

			$Address = mysqli_real_escape_string($this->dbConnection, $labels["Address"]);
		}

		if (array_key_exists('PO_Box', $labels)) {

			$PO_Box = mysqli_real_escape_string($this->dbConnection, $labels["PO_Box"]);
		}

		if (array_key_exists('city', $labels)) {

			$city = mysqli_real_escape_string($this->dbConnection, $labels["city"]);
		}

		if (array_key_exists('countary', $labels)) {

			$countary = mysqli_real_escape_string($this->dbConnection, $labels["countary"]);
		}

		if (array_key_exists('Telephone', $labels)) {

			$Telephone = mysqli_real_escape_string($this->dbConnection, $labels["Telephone"]);
		}

		if (array_key_exists('Fax', $labels)) {

			$Fax = mysqli_real_escape_string($this->dbConnection, $labels["Fax"]);
		}

		if (array_key_exists('Email', $labels)) {

			$Email = mysqli_real_escape_string($this->dbConnection, $labels["Email"]);
		}

		$vals = "'" . $event . "','" . $Company_Name . "','" . $Contact_Person . "','" . $Job_Title . "','" . $Address . "','" . $PO_Box . "','" . $city . "','" . $countary . "','" . $Telephone . "','" . $Fax . "','" . $Email . "'";

		$query = "INSERT INTO `register_event`(`event`,`Company_Name`,`Contact_Person`,`Job_Title`,`Address`,`PO_Box`,`city`,`countary`,`Telephone`,`Fax`,`Email`) VALUES ($vals)";

		$result = $this->DBquery("$query");

		return $result;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getExcursions($parm)

	{

		$query = "SELECT  * FROM `Excursions`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$Excursions = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excur["id"] = $columns["id"];

			$excur["name_english"] = $columns["name_english"];

			$excur["name_france"] = $columns["name_france"];

			$excur["order"] = $columns["order"];

			$excur["active"] = $columns["active"];

			array_push($Excursions, $excur);
		}

		mysqli_free_result($result);

		return $Excursions;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getrecipes($parm)

	{

		$query = "SELECT  * FROM `recipes`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getrecipes.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["description"] = $columns["description"];

			$excursionprog["description_arabic"] = $columns["description_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getevents($parm)

	{

		$query = "SELECT  * FROM `events`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('footer_special', $parm)) {

			$parm["footer_special"] = (int)$parm["footer_special"];

			$condition .= " and footer_special = $parm[footer_special]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `date` DESC");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["smoll_description"] = $columns["smoll_description"];

			$excursionprog["description"] = $columns["description"];

			$excursionprog["smoll_description_arabic"] = $columns["smoll_description_arabic"];

			$excursionprog["description_arabic"] = $columns["description_arabic"];

			$excursionprog["date"] = $columns["date"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getcategory_photo($parm)

	{

		$query = "SELECT  * FROM `category_photo`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["name_english"] = $columns["name_english"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprovinces($parm)

	{

		$query = "SELECT  * FROM `provinces`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["name_english"] = $columns["name_english"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getbranches($parm)

	{

		$query = "SELECT  * FROM `branches`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('provinces', $parm)) {

			$parm["provinces"] = (int)$parm["provinces"];

			$condition .= " and provinces = $parm[provinces]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["map"] = $columns["map"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["name_english"] = $columns["name_english"];

			$excursionprog["description_arabic"] = $columns["description_arabic"];

			$excursionprog["description_english"] = $columns["description_english"];

			$excursionprog["provinces"] = $columns["provinces"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function geteventimages($parm)

	{

		$query = "SELECT  * FROM `event_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('event_id', $parm)) {

			$parm["event_id"] = (int)$parm["event_id"];

			$condition .= " and event_id = $parm[event_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, geteventimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["event_id"] = $columns["event_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getlatest_news($parm)

	{

		$query = "SELECT  * FROM `latest_news`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `date` DESC");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getlatest_news.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["smoll_description"] = $columns["smoll_description"];

			$excursionprog["description"] = $columns["description"];

			$excursionprog["smoll_description_arabic"] = $columns["smoll_description_arabic"];

			$excursionprog["description_arabic"] = $columns["description_arabic"];

			$excursionprog["date"] = $columns["date"];

			$excursionprog["special"] = $columns["special"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getlatest_newsimages($parm)

	{

		$query = "SELECT  * FROM `latest_news_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('latest_news_id', $parm)) {

			$parm["latest_news_id"] = (int)$parm["latest_news_id"];

			$condition .= " and latest_news_id = $parm[latest_news_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getlatest_newsimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["latest_news_id"] = $columns["latest_news_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function geteconomics($parm)

	{

		$query = "SELECT  * FROM `economics`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `date` DESC");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, geteconomics.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["smoll_description"] = $columns["smoll_description"];

			$excursionprog["description"] = $columns["description"];

			$excursionprog["smoll_description_arabic"] = $columns["smoll_description_arabic"];

			$excursionprog["description_arabic"] = $columns["description_arabic"];

			$excursionprog["date"] = $columns["date"];

			$excursionprog["special"] = $columns["special"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function geteconomicsimages($parm)

	{

		$query = "SELECT  * FROM `economics_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('economics_id', $parm)) {

			$parm["economics_id"] = (int)$parm["economics_id"];

			$condition .= " and economics_id = $parm[economics_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, geteconomicsimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["economics_id"] = $columns["economics_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getegyptnews($parm)

	{

		$query = "SELECT  * FROM `egyptnews`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `date` DESC");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getegyptnews.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["smoll_description"] = $columns["smoll_description"];

			$excursionprog["description"] = $columns["description"];

			$excursionprog["smoll_description_arabic"] = $columns["smoll_description_arabic"];

			$excursionprog["description_arabic"] = $columns["description_arabic"];

			$excursionprog["date"] = $columns["date"];

			$excursionprog["special"] = $columns["special"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getegyptnewsimages($parm)

	{

		$query = "SELECT  * FROM `egyptnews_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('egyptnews_id', $parm)) {

			$parm["egyptnews_id"] = (int)$parm["egyptnews_id"];

			$condition .= " and egyptnews_id = $parm[egyptnews_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getegyptnewsimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["egyptnews_id"] = $columns["egyptnews_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getadvright1($parm)

	{

		$query = "SELECT  * FROM `advright1`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` asc");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["category"] = $columns["category"];

			$excursionprog["category_arabic"] = $columns["category_arabic"];

			$excursionprog["link"] = $columns["link"];

			$excursionprog["link_arabic"] = $columns["link_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getadvright3($parm)

	{

		$query = "SELECT  * FROM `advright3`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` asc");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["category"] = $columns["category"];

			$excursionprog["category_arabic"] = $columns["category_arabic"];

			$excursionprog["link"] = $columns["link"];

			$excursionprog["link_arabic"] = $columns["link_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getadvright6($parm)

	{

		$query = "SELECT  * FROM `advright6`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` asc");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["category"] = $columns["category"];

			$excursionprog["category_arabic"] = $columns["category_arabic"];

			$excursionprog["link"] = $columns["link"];

			$excursionprog["link_arabic"] = $columns["link_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getadvright5($parm)

	{

		$query = "SELECT  * FROM `advright5`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` asc");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["category"] = $columns["category"];

			$excursionprog["category_arabic"] = $columns["category_arabic"];

			$excursionprog["link"] = $columns["link"];

			$excursionprog["link_arabic"] = $columns["link_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getadvright7($parm)

	{

		$query = "SELECT  * FROM `advright7`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` desc");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["category"] = $columns["category"];

			$excursionprog["category_arabic"] = $columns["category_arabic"];

			$excursionprog["link"] = $columns["link"];

			$excursionprog["link_arabic"] = $columns["link_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getadvright2($parm)

	{

		$query = "SELECT  * FROM `advright2`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` desc");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["category"] = $columns["category"];

			$excursionprog["category_arabic"] = $columns["category_arabic"];

			$excursionprog["link"] = $columns["link"];

			$excursionprog["link_arabic"] = $columns["link_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function strAds()

	{
	}

	function getadvright4($parm)

	{

		$query = "SELECT  * FROM `advright4`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		}*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` desc");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getevents.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["name_arabic"] = $columns["name_arabic"];

			$excursionprog["image"] = $columns["image"];

			$excursionprog["category"] = $columns["category"];

			$excursionprog["category_arabic"] = $columns["category_arabic"];

			$excursionprog["link"] = $columns["link"];

			$excursionprog["link_arabic"] = $columns["link_arabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getwady_compact($parm)

	{

		$query = "SELECT  * FROM `wady_compact`";

		$condition = " active = 1 ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		/*	if (array_key_exists('name', $parm)) {

		 $parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

		 $condition .= " and ( name LIKE  '%$parm[name]%' or smoll_description LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' )";

		 }*/

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getwady_compact.");

			return false;
		}

		$excursionprogram = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$excursionprog["id"] = $columns["id"];

			$excursionprog["name"] = $columns["name"];

			$excursionprog["namearabic"] = $columns["namearabic"];

			$excursionprog["description"] = $columns["description"];

			$excursionprog["descriptionarabic"] = $columns["descriptionarabic"];

			$excursionprog["order"] = $columns["order"];

			$excursionprog["active"] = $columns["active"];

			array_push($excursionprogram, $excursionprog);
		}

		mysqli_free_result($result);

		return $excursionprogram;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getwady_compactimages($parm)

	{

		$query = "SELECT  * FROM `wady_compact_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('wady_compact_id', $parm)) {

			$parm["wady_compact_id"] = (int)$parm["wady_compact_id"];

			$condition .= " and wady_compact_id = $parm[wady_compact_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getwady_compactimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["wady_compact_id"] = $columns["wady_compact_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getvideo($parm)

	{

		$query = "SELECT  * FROM `videos`";

		$condition = "active = 1";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		$limit = " ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('pid', $parm)) {

			$parm["pid"] = (int)$parm["pid"];

			$condition .= " and pid = $parm[pid]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('cat', $parm)) {

			$parm["cat"] = (int)$parm["cat"];

			$condition .= " and cat = $parm[cat]";
		}

		if (array_key_exists('id>', $parm)) {

			$parm["id"] = (int)str_replace(">", "", $parm['id>']);

			$condition .= " and id >= $parm[id]";
		}

		if (array_key_exists('limit', $parm)) {

			$parm["limit"] = mysqli_real_escape_string($this->dbConnection, $parm["limit"]);

			$limit = " limit " . $parm["limit"];
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` $limit");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getvideo.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*$img["id"] = $columns["id"];

			$img["video"] = $columns["video"];

                        $img["name_english"] = $columns["name_english"];

                        $img["name_arabic"] = $columns["name_arabic"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["pid"] = $columns["pid"];

			array_push($images, $img);*/

			$images[] = $columns;
		}

		//mysqli_free_result($result);

		return $images;
	}

	function getmag($parm)

	{

		$query = "SELECT  * FROM `mag`";

		$condition = "active = 1";

		$limit = " ";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('pid', $parm)) {

			$parm["pid"] = (int)$parm["pid"];

			$condition .= " and pid = $parm[pid]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('cat', $parm)) {

			$parm["cat"] = (int)$parm["cat"];

			$condition .= " and cat = $parm[cat]";
		}

		if (array_key_exists('id>', $parm)) {

			$parm["id"] = (int)str_replace(">", "", $parm['id>']);

			$condition .= " and id >= $parm[id]";
		}

		if (array_key_exists('limit', $parm)) {

			$parm["limit"] = mysqli_real_escape_string($this->dbConnection, $parm["limit"]);

			$limit = " limit " . $parm["limit"];
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order` $limit");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getvideo.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*$img["id"] = $columns["id"];

			$img["video"] = $columns["video"];

                        $img["name_english"] = $columns["name_english"];

                        $img["name_arabic"] = $columns["name_arabic"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			$img["pid"] = $columns["pid"];

			array_push($images, $img);*/

			$images[] = $columns;
		}

		//mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getsales_network($parm)

	{

		$query = "SELECT  * FROM `sales_network`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getsales_network.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["name"] = $columns["name"];

			$img["name_arabic"] = $columns["name_arabic"];

			$img["image"] = $columns["image"];

			$img["address"] = $columns["address"];

			$img["address_arabic"] = $columns["address_arabic"];

			$img["telephone"] = $columns["telephone"];

			$img["fax"] = $columns["fax"];

			$img["email"] = $columns["email"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	function getegypt_beyond_packages($parm)

	{

		$query = "SELECT  * FROM `egypt_beyond_packages`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$eyptpackages = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$egypac["id"] = $columns["id"];

			$egypac["name_english"] = $columns["name_english"];

			$egypac["name_france"] = $columns["name_france"];

			$egypac["order"] = $columns["order"];

			$egypac["active"] = $columns["active"];

			array_push($eyptpackages, $egypac);
		}

		mysqli_free_result($result);

		return $eyptpackages;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getorder($sliderpram, $tb = "order", $where = "")

	{

		$query = "SELECT * FROM `" . $tb . "` ";

		$condition = $where;

		if (!empty($sliderpram['login'])) {

			$sliderpram['login'] = (int)$sliderpram['login'];

			if ($condition)

				$condition .= " and ";

			$condition .= " login = $sliderpram[login]";
		}

		if (!empty($sliderpram['user_id'])) {

			$sliderpram['user_id'] = (int)$sliderpram['user_id'];

			if ($condition)

				$condition .= " and ";

			$condition .= " user_id = $sliderpram[user_id]";
		}

		if (!empty($sliderpram['coupon_code'])) {

			$sliderpram['coupon_code'] = (int)$sliderpram['coupon_code'];

			if ($condition)

				$condition .= " and ";

			$condition .= " coupon_code = $sliderpram[coupon_code]";
		}

		if (!empty($sliderpram['login_worker'])) {

			$sliderpram['login_worker'] = (int)$sliderpram['login_worker'];

			if ($condition)

				$condition .= " and ";

			$condition .= " login_worker = $sliderpram[login_worker]";
		}

		if (!empty($sliderpram['order'])) {

			$sliderpram['order'] = (int)$sliderpram['order'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `order` = $sliderpram[order]";
		}

		if (!empty($sliderpram['id'])) {

			$sliderpram['id'] = (int)$sliderpram['id'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  id = $sliderpram[id]";
		}

		if (!empty($sliderpram['specialized'])) {

			$sliderpram['specialized'] = (int)$sliderpram['specialized'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `specialized` = $sliderpram[specialized]";
		}

		if (!empty($sliderpram['active'])) {

			$sliderpram['active'] = (int)$sliderpram['active'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `active` = $sliderpram[active]";
		}

		if (!empty($sliderpram['worker'])) {

			$sliderpram['worker'] = (int)$sliderpram['worker'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `worker` = $sliderpram[worker]";
		}

		if (!empty($sliderpram['!worker'])) {

			$sliderpram['worker'] = (int)$sliderpram['!worker'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `worker` !=" . $sliderpram['!worker'];
		}

		if (!empty($sliderpram['status'])) {

			$sliderpram['status'] = (int)$sliderpram['status'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `status` = $sliderpram[status]";
		}

		if (!empty($sliderpram['!status'])) {

			$sliderpram['!status'] = (int)$sliderpram['!status'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `status` !=" . $sliderpram['!status'];
		}

		if (!empty($sliderpram['city'])) {

			$sliderpram['city'] = (int)$sliderpram['city'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `city` =" . $sliderpram['city'];
		}

		if (!empty($sliderpram['governorate'])) {

			$sliderpram['governorate'] = (int)$sliderpram['governorate'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  `governorate` =" . $sliderpram['governorate'];
		}

		if ($condition)

			$query .= " WHERE ";

		//else $query .= $where;

		// echo "$query $condition order by `date` desc";

		$result = $this->DBquery("$query $condition order by `date` desc");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getlogin.");

			return false;
		}

		$companyies = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*			$comp["id"] = $columns["id"];

			$comp["login"] = $columns["login"];

			$comp["price"] = $columns["price"];

			$comp["date"] = $columns["date"];

			array_push($companyies, $comp);*/

			$companyies[] = $columns;
		}

		mysqli_free_result($result);

		return $companyies;
	}

	function getgallery($parm)

	{

		$query = "SELECT  * FROM `images`";

		$condition = "active = 1";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('category_photo', $parm)) {

			$parm["category_photo"] = (int)$parm["category_photo"];

			$condition .= " and category_photo = $parm[category_photo]";
		}

		if (array_key_exists('blog', $parm)) {

			$parm["blog"] = (int)$parm["blog"];

			$condition .= " and blog = $parm[blog]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('category', $parm)) {

			$parm["category"] = (int)$parm["category"];

			$condition .= " and category = $parm[category]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

                        $img["name"] = $columns["name"];

                        $img["name_arabic"] = $columns["name_arabic"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);*/

			$images[] =  $columns;
		}

		mysqli_free_result($result);

		return $images;
	}

	function getgroups($parm)

	{

		$query = "SELECT  * FROM `groups`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["name_english"] = $columns["name_english"];

			$img["name_arabic"] = $columns["name_arabic"];

			$img["description_arabic"] = $columns["description_arabic"];

			$img["description"] = $columns["description"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getgalleryimages($parm)

	{

		$query = "SELECT  * FROM `gallery_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('gallery_id', $parm)) {

			$parm["gallery_id"] = (int)$parm["gallery_id"];

			$condition .= " and gallery_id = $parm[gallery_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgalleryimages.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["gallery_id"] = $columns["gallery_id"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//**************************************************************************************************

	function insertmessage($message)

	{

		if (array_key_exists('message', $message)) {

			$message = mysqli_real_escape_string($this->dbConnection, $message["message"]);
		}

		$from = 2;

		$to = 1;

		$cols = "'" . "email" . "'";

		$vals = "'" . $message . "','" . $from . "','" . $to . "','" . "1" . "'";

		$query = "INSERT INTO `chat`(`message`,`from`,`to`,`active`) VALUES ($vals)";

		$result = $this->DBquery("$query");

		return $result;
	}

	//***************************************************************************************

	//***************************************************************************************

	/*

	 function getuser($userpram) {

	 $query = "SELECT  * FROM `user`";

	 $condition = " active = 1 ";

	 if (!empty($userpram['id'])) {

	 $userpram['id'] = (int)$userpram['id'];

	 $condition .= " and `id` = $userpram[id]";

	 }

	 if (!empty($userpram['username'])) {

	 $userpram['username'] = $userpram['username'];

	 $condition .= ' and `username` = "' . $userpram["username"] .'"';

	 }

	 if(!empty($condition)) {

	 $query .= " WHERE  ";

	 } else {

	 }

	 $result = $this->DBquery("$query $condition");

	 echo $query.$condition;

	 if(!$result) {

	 $err = $this -> DBgetError();

	 $this -> setError("Error : " . $err["1"]);

	 $this -> setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

	 return false;

	 }

	 $users = array();

	 while ($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

	 $use["id"] = $columns["id"];

	 $use["username"] = $columns["username"];

	 $use["active"] = $columns["active"];

	 array_push($users, $use);

	 }

	 mysql_free_result($result);

	 return $users;

	 }

	 */

	//***************************************************************************************

	//***************************************************************************************

	function getchat($chatpram)

	{

		$query = "SELECT  * FROM `chat`";

		$condition = " active = 1 ";

		if (!empty($chatpram['from'])) {

			$chatpram['from'] = (int)$chatpram['from'];

			$condition .= " and (`from` = $chatpram[from]";
		}

		if (!empty($chatpram['to'])) {

			$chatpram['to'] = (int)$chatpram['to'];

			$condition .= " or `to` = $chatpram[to]) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE  ";
		} else {
		}

		//echo $query.$condition;

		$result = $this->DBquery("$query $condition order by `id`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprojectimages.");

			return false;
		}

		$chats = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$cha["id"] = $columns["id"];

			$cha["message"] = $columns["message"];

			$cha["from"] = $columns["from"];

			$cha["to"] = $columns["to"];

			$cha["active"] = $columns["active"];

			$cha["date"] = $columns["date"];

			array_push($chats, $cha);
		}

		mysqli_free_result($result);

		return $chats;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getcategory($parm)

	{

		$query = "SELECT  * FROM `category`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getcategory.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["smoll_descriptopn"] = $columns["smoll_descriptopn"];

			$gall["smoll_descriptopn_arabic"] = $columns["smoll_descriptopn_arabic"];

			$gall["image"] = $columns["image"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	/*function getsub_category($parm) {

	 $query = "SELECT  * FROM `sub_category`";

	 $condition = "active = 1";

	 if (array_key_exists('id', $parm)) {

	 $parm["id"] = (int)$parm["id"];

	 $condition .= " and id = $parm[id]";

	 }

	 if (array_key_exists('category', $parm)) {

	 $parm["category"] = (int)$parm["category"];

	 $condition .= " and category = $parm[category]";

	 }

	 if (array_key_exists('name', $parm)) {

	 $parm["name"] = mysqli_real_escape_string($this -> dbConnection, $parm["name"]);

	 $condition .= " and name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ";

	 }

	 if (!empty($condition)) {

	 $query .= " WHERE ";

	 }

	 //echo $query.$condition." order by `order`";

	 $result = $this -> DBquery("$query $condition order by `order`");

	 if (!$result) {

	 $err = $this -> DBgetError();

	 $this -> setError("Error : " . $err["1"]);

	 $this -> setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

	 return false;

	 }

	 $gallery = array();

	 while ($columns = $result -> fetch_array(MYSQLI_ASSOC)) {

	 $gall["id"] = $columns["id"];

	 $gall["name"] = $columns["name"];

	 $gall["name_arabic"] = $columns["name_arabic"];

	 $gall["category"] = $columns["category"];

	 $gall["image"] = $columns["image"];

	 $gall["order"] = $columns["order"];

	 $gall["active"] = $columns["active"];

	 array_push($gallery, $gall);

	 }

	 mysqli_free_result($result);

	 return $gallery;

	 }*/

	//***************************************************************************************

	//***************************************************************************************

	function getdownload_product($parm)

	{

		$query = "SELECT  * FROM `download_product`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getdownload_product.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name_english"] = $columns["name_english"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["active"] = $columns["active"];

			$gall["order"] = $columns["order"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getdownload_details($parm)

	{

		$query = "SELECT  * FROM `download_details`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('p_id', $parm)) {

			$parm["p_id"] = (int)$parm["p_id"];

			$condition .= " and p_id = $parm[p_id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getdownload_product.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["p_id"] = $columns["p_id"];

			$gall["name_english"] = $columns["name_english"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["download"] = $columns["download"];

			$gall["date"] = $columns["date"];

			$gall["active"] = $columns["active"];

			$gall["order"] = $columns["order"];

			$gall["outdownload"] = $columns["outdownload"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	function getcompanies($parm)

	{

		$query = "SELECT  * FROM `companies`";

		$condition = "active = 1";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('selection', $parm)) {

			$parm["selection"] = (int)$parm["selection"];

			$condition .= " and selection = $parm[selection]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		// die("$query $condition order by `id`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["active"] = $columns["active"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			array_push($gallery, $gall);*/

			$gallery[] =   $columns;
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	function getCat($parm)

	{

		$query = "SELECT  * FROM `categories`";

		$condition = "active = 1";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('selection', $parm)) {

			$parm["selection"] = (int)$parm["selection"];

			$condition .= " and selection = $parm[selection]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		// die("$query $condition order by `id`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["active"] = $columns["active"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			array_push($gallery, $gall);*/

			$gallery[] =   $columns;
		}

		mysqli_free_result($result);

		return $gallery;
	}

	function getUser($parm)

	{

		$query = "SELECT  * FROM `users`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('selection', $parm)) {

			$parm["selection"] = (int)$parm["selection"];

			$condition .= " and selection = $parm[selection]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `id`");

		//die("$query $condition order by `id`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["active"] = $columns["active"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			array_push($gallery, $gall);*/

			$gallery[] =   $columns;
		}

		mysqli_free_result($result);

		return $gallery;
	}

	function getcomments($parm)

	{

		$query = "SELECT  * FROM `comments`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('pid', $parm)) {

			$parm["pid"] = (int)$parm["pid"];

			$condition .= " and pid = $parm[pid]";
		}

		if (array_key_exists('selection', $parm)) {

			$parm["selection"] = (int)$parm["selection"];

			$condition .= " and selection = $parm[selection]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `id`");

		//die("$query $condition order by `id`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["active"] = $columns["active"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			array_push($gallery, $gall);*/

			$gallery[] =   $columns;
		}

		mysqli_free_result($result);

		return $gallery;
	}

	function cptime($start)

	{

		global $plang;

		$months = array("Jan" => "يناير", "Feb" => "فبراير", "Mar" => "مارس", "Apr" => "أبريل", "May" => "مايو", "Jun" => "يونيو", "Jul" => "يوليو", "Aug" => "أغسطس", "Sep" => "سبتمبر", "Oct" => "أكتوبر", "Nov" => "نوفمبر", "Dec" => "ديسمبر");

		$your_date = date('y-m-d', $start); // The Current Date

		if (!$plang)

			return date('Y-m-d - h:i a', $start);

		$en_month = date("M", strtotime($your_date));

		foreach ($months as $en => $ar) {

			if ($en == $en_month) {

				$ar_month = $ar;
			}
		}

		$ar = array(

			"يناير ", "فبراير", "مارس", "ابريل", "مايو", "يونيو",

			"يوليو", "اغسطس", "سبتمبر", "اكتوبر", "نوفمبر", "ديسمبر"

		);

		$time = time() - $start;

		$find = array("Sat", "Sun", "Mon", "Tue", "Wed", "Thu", "Fri");

		$replace = array("السبت", "الأحد", "الإثنين", "الثلاثاء", "الأربعاء", "الخميس", "الجمعة");

		$ar_day_format = date('D', $start); // The Current Day

		$ar_day = str_replace($find, $replace, $ar_day_format);

		return $ar_day . " " . date('d', $start) . " " . $ar_month . " " . date('Y', $start) . " - " . date('h:i', $start) . " " . (date('a', $start) == "pm" ? "م" : "ص");

		if ($time <= 59) {

			return base64_decode("2YXZhtiw") . $time . base64_decode("ICDYq9mI2KfZhiDZhdi22Ko=");
		} elseif ($time == 60) {

			return base64_decode("2YXZhtiwINiv2YLZitmC2Ycg2YXYttiq");
		} elseif (60 < $time && $time <= 3600) {

			$time = ceil($time / 60);

			return  $time . base64_decode("INiv2YLYp9im2YIg2YXYttiq");
		} elseif (3600 < $time && $time <= 86400) {

			$time = ceil($time / 3600);

			return  $time . base64_decode("INiz2KfYudin2Kog2YXYttiq");
		} elseif (86400 < $time && $time <= 604800) {

			$time = ceil($time / 86400);

			return  $time . '' . base64_decode("INin2YrYp9mFINmF2LbYqg==");
		} elseif (604800 < $time && $time <= 2592000) {

			$time = ceil($time / 604800);

			return  $time . base64_decode("INin2LPYp9io2YrYuSDZhdi22Ko=");
		} elseif (2592000 < $time && $time <= 29030400) {

			$time = ceil($time / 2592000);

			return   $time . base64_decode("INi02YfZiNixINmF2LbYqg==");
		} else {

			return date('h:i - d/m/Y', $start);
		}
	}

	function getStrAds($type)

	{

		$str = "";

		switch ($type) {

			case 1:

				$str = "الصفحة الرئيسية";

				break;

			default:

				$str = "فى  الصفحات الداخلية";

				break;
		}

		return $str;
	}

	function getAds($parm, $order = false)

	{

		$query = "SELECT  * FROM `ads`";

		$condition = "active = 1";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		if (!$order)

			$order = "order by `order`";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('selection', $parm)) {

			$parm["selection"] = (int)$parm["selection"];

			$condition .= " and selection = $parm[selection]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and  name LIKE  '%$parm[name]%' ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition $order");

		//die("$query $condition order by `id`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["active"] = $columns["active"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			array_push($gallery, $gall);*/

			//if($columns["selection"])

			//$columns[""] = getStrAds($columns["selection"]);

			/*if($count == 1)

            $gallery[] =   $columns;*/

			$gallery[] =   $columns;
		}

		mysqli_free_result($result);

		if (count($gallery) == 1 && !$this->isAdmin)

			$gallery[] = $gallery[0];

		/*        echo "<pre>";

        print_r($gallery);*/

		return $gallery;
	}

	function getPages($parm, $order = false)

	{

		$query = "SELECT  * FROM `pages`";

		$condition = "active = 1";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		if (!$order)

			$order = "order by `order` desc";

		$limit = "";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('prompt', $parm)) {

			$parm["prompt"] = (int)$parm["prompt"];

			$condition .= " and prompt = $parm[prompt]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and  name LIKE  '%$parm[name]%' ";
		}

		if (array_key_exists('in', $parm)) {

			$parm["in"] = mysqli_real_escape_string($this->dbConnection, $parm["in"]);

			$condition .= " and id IN ('" . str_replace(",", "','", $parm["in"]) . "')";

			//echo $condition;

		}

		if (array_key_exists('limit', $parm)) {

			$parm["limit"] = mysqli_real_escape_string($this->dbConnection, $parm["limit"]);

			$limit = " limit " . $parm["limit"];
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition $order $limit");

		//die("$query $condition order by `id`");

		/*       echo $query.$condition;*/

		$this->dbQuery = "$query $condition $order $limit";

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["active"] = $columns["active"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			array_push($gallery, $gall);*/

			$gallery[] =   $columns;
		}

		mysqli_free_result($result);

		return $gallery;
	}

	function getBlog($parm, $order = false)

	{

		$query = "SELECT  * FROM `products`";

		$condition = "active = 1";

		if ($this->isAdmin)

			$condition = "( active = 1 or active =0 ) ";

		if (!$order)

			$order = "order by `date` desc";

		$limit = "";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('best', $parm)) {

			$parm["best"] = (int)$parm["best"];

			$condition .= " and best = $parm[best]";
		}

		if (array_key_exists('deal', $parm)) {

			$parm["deal"] = (int)$parm["deal"];

			$condition .= " and deal = $parm[deal]";
		}

		if (array_key_exists('company', $parm)) {

			$parm["company"] = (int)$parm["company"];

			$condition .= " and company = $parm[company]";
		}

		if (array_key_exists('where', $parm)) {

			$condition .= " and " . $parm["where"];
		}

		if (array_key_exists('new', $parm)) {

			$parm["new"] = (int)$parm["new"];

			$condition .= " and new = $parm[new]";
		}

		if (array_key_exists('prompt', $parm)) {

			$parm["prompt"] = (int)$parm["prompt"];

			$condition .= " and prompt = $parm[prompt]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and  name LIKE  '%$parm[name]%' ";
		}

		if (array_key_exists('in', $parm)) {

			$parm["in"] = mysqli_real_escape_string($this->dbConnection, $parm["in"]);

			$condition .= " and id IN ('" . str_replace(",", "','", $parm["in"]) . "')";

			//echo $condition;

		}

		if (array_key_exists('limit', $parm)) {

			$parm["limit"] = mysqli_real_escape_string($this->dbConnection, $parm["limit"]);

			$limit = " limit " . $parm["limit"];
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition $order $limit");

		//die("$query $condition order by `id`");

		//echo $query . $condition;

		$this->dbQuery = "$query $condition $order $limit";

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["active"] = $columns["active"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			array_push($gallery, $gall);*/

			$gallery[] =   $columns;
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	function getmVideo($parm)

	{

		$query = "SELECT  * FROM `video`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["image"] = $columns["image"];

  			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			$gall["category"] = $columns["category"];

			$gall["best"] = $columns["best"];

			$gall["new"] = $columns["new"];*/

			$gallery[] =   $columns;

			//array_push($gallery, $gall);

		}

		mysqli_free_result($result);

		return $gallery;
	}

	function Sion($sion, $value = false)

	{

		if ($value) {

			$_SESSION[$sion]  = $value;

			//setcookie($sion,$value,(60*60*24));

		}

		if (isset($_COOKIE[$sion]) && $_COOKIE[$sion]  != "false" &&  $_COOKIE[$sion]  != "null") {

			return $_COOKIE[$sion];
		} else if (isset($_SESSION[$sion]) && $_SESSION[$sion]  != "false" &&  $_SESSION[$sion]  != "null") {

			return $_SESSION[$sion];

			//return $_COOKIE[$sion];

		} else {

			return false;
		}
	}

	function limit_str($text, $limit = 20, $d = false)

	{

		$m = explode(" ", $text);

		if (count($m) > $limit) {

			$y = array();

			for ($t = 0; $t <= ($limit - 1); $t++) {

				$y[$t] = $m[$t];
			}

			$b = implode(" ", $y);

			if (!$d) {

				$b .= " ...";
			}
		} else {

			$b = $text;
		}

		return strip_tags($b);
	}

	function getDateTime($str, $lang)

	{

		$str = date("Y-m-d", $str);

		$times = (explode("-", $str));

		if (explode(" ", $str))

			$times = (explode("-", explode(" ", $str)[0]));

		$months = array("01" => "Jan", "02" => "Feb", "03" => "Mar", "04" => "Apr", "05" => "May", "06" => "Jun", "07" => "Jul", "08" => "Aug", "09" => "Sep", "10" => "Oct", "11" => "Nov", "12" => "Dec");

		if ($lang == "arabic")

			$months = array("01" => "يناير", "02" => "فبراير", "03" => "مارس", "04" => "ابريل", "05" => "مايو", "06" => "يونيو", "07" => "يوليو", "08" => "اغسطس", "09" => "سبتمبر", "10" => "اكتوبر", "11" => "نوفمبر", "12" => "ديسمبر");

		return array($times[2], $months[$times[1]], $times[0]);
	}

	function isv($is = '', $a = false)

	{

		if (isset($_POST[$is]) and !$a) {

			return $_POST[$is];
		} elseif (isset($_GET[$is]) and !$a) {

			return $_GET[$is];
		} elseif (isset($_FILES[$is])) {

			return $_FILES[$is];
		}

		return false;
	}

	function isactive($is = '', $a = false, $d = "active")
	{
		if ($this->isv("ptype")  == $is || $this->isv($is))
			return $d;
		if ($this->isv("app")  == $is && !$this->isv("ptype") ||  !$this->isv("app") && $a) {
			return $d;
		}
		return "";
	}

	function getlogin($sliderpram, $active = false)

	{

		$table = "users";

		if (!empty($sliderpram['table']))

			$table = $sliderpram['table'];

		$query = "SELECT * FROM `" . $table . "`";

		if (!$active) {

			if (empty($sliderpram['check'])) {

				$condition = "active = 1";
			} else {

				$condition = "active = 0";
			}
		}

		if (!empty($sliderpram['id'])) {

			$sliderpram['id'] = (int)$sliderpram['id'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  id = $sliderpram[id]";
		}

		if (!empty($sliderpram['specialized'])) {

			$sliderpram['specialized'] = (int)$sliderpram['specialized'];

			if ($condition)  $condition .= " and ";

			$condition .= "  specialized = $sliderpram[specialized]";
		}

		if (!empty($sliderpram['account_type'])) {

			$sliderpram['account_type'] = (int)$sliderpram['account_type'];

			if ($condition)     $condition .= " and ";

			$condition .= "  account_type = $sliderpram[account_type]";
		}

		if (!empty($sliderpram['governorate'])) {

			$sliderpram['governorate'] = (int)$sliderpram['governorate'];

			if ($condition)         $condition .= " and ";

			$condition .= "  governorate = $sliderpram[governorate]";
		}

		if (!empty($sliderpram['city'])) {

			$sliderpram['city'] = (int)$sliderpram['city'];

			if ($condition)         $condition .= " and ";

			$condition .= "  city = $sliderpram[city]";
		}

		if (!empty($sliderpram['location'])) {

			$sliderpram['location'] = (int)$sliderpram['location'];

			if ($condition)

				$condition .= " and ";

			$condition .= "  location = $sliderpram[location]";
		}

		if (!empty($sliderpram['password'])) {

			$sliderpram['password'] = mysqli_real_escape_string($this->dbConnection, $sliderpram["password"]);

			if ($condition)

				$condition .= " and ";

			$condition .= " password = '" . md5($sliderpram['password']) . "'";
		}

		if (!empty($sliderpram['username'])) {

			$sliderpram['username'] = mysqli_real_escape_string($this->dbConnection, $sliderpram["username"]);

			if ($condition)

				$condition .= " and ";

			$condition .= " username = '" . $sliderpram['username'] . "'";
		}

		if (!empty($sliderpram['code'])) {

			$sliderpram['code'] = mysqli_real_escape_string($this->dbConnection, $sliderpram["code"]);

			if ($condition)

				$condition .= " and ";

			$condition .= " code = '" . $sliderpram['code'] . "'";
		}

		if (!empty($sliderpram['email'])) {

			$sliderpram['email'] = mysqli_real_escape_string($this->dbConnection, $sliderpram["email"]);

			if ($condition)

				$condition .= " and ";

			$condition .= " email = '" . $sliderpram['email'] . "'";
		}

		if (!empty($sliderpram['mobile'])) {

			$sliderpram['mobile'] = mysqli_real_escape_string($this->dbConnection, $sliderpram["mobile"]);

			if ($condition)

				$condition .= " and ";

			$condition .= " mobile = '" . $sliderpram['mobile'] . "'";
		}

		if ($condition)

			$query .= " WHERE ";

		//die("$query $condition");

		$this->DQuery = "$query $condition";

		$result = $this->DBquery("$query $condition");

		if (!$result) {

			$this->DBsetError();

			$err = $this->DBgetError();

			$this->setError("Error getting categories information. : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getlogin.");

			return false;
		}

		$companyies = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*			$comp["id"] = $columns["id"];

			$comp["name"] = $columns["name"];

			$comp["password"] = $columns["password"];

			$comp["backuppassword"] = $columns["backuppassword"];

			$comp["account_type"] = $columns["account_type"];

			$comp["email"] = $columns["email"];

			$comp["mobile"] = $columns["mobile"];

                        $comp["governorate"] = $columns["governorate"];

                        $comp["city"] = $columns["city"];

                        $comp["location"] = $columns["location"];

                        $comp["activatecode"] = $columns["activatecode"];

                        $comp["active"] = $columns["active"];*/

			/*           if($columns["username"] != "admin" )

           $columns["level"] = 0;*/

			$companyies[] =     $columns;

			//array_push($companyies, $comp);

		}

		mysqli_free_result($result);

		return $companyies;
	}

	function isMob()

	{

		$useragent = $_SERVER['HTTP_USER_AGENT'];

		if (preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i', $useragent) || preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i', substr($useragent, 0, 4)))

			return true;

		return false;
	}

	var  $DQuery = "";

	//***************************************************************************************

	function Base64Image($path)

	{

		$type = pathinfo($path, PATHINFO_EXTENSION);

		$data = file_get_contents($path);

		$base64 = 'data:image/' . $type . ';base64,' . base64_encode($data);

		return $base64;
	}

	function getmGallery($parm)

	{

		$query = "SELECT  * FROM `images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('category', $parm)) {

			$parm["category"] = (int)$parm["category"];

			$condition .= " and category = $parm[category]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["image"] = $columns["image"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			$gall["category"] = $columns["category"];

			$gall["best"] = $columns["best"];

			$gall["new"] = $columns["new"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	function getPhoto($parm)

	{

		$query = "SELECT  * FROM `photo`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('category', $parm)) {

			$parm["category"] = (int)$parm["category"];

			$condition .= " and category = $parm[category]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["image"] = $columns["image"];

  			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			$gall["category"] = $columns["category"];

			$gall["best"] = $columns["best"];

			$gall["new"] = $columns["new"];*/

			$gallery[] = $columns;

			//array_push($gallery, $gall);

		}

		mysqli_free_result($result);

		return $gallery;
	}

	function getproducts($parm)

	{

		$query = "SELECT  * FROM `products`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('!level', $parm)) {

			$parm["!level"] = (int)$parm["!level"];

			//die($parm["!level"]);

			$condition .= " and level != " . $parm["!level"];
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('new', $parm)) {

			$parm["new"] = (int)$parm["new"];

			$condition .= " and new = $parm[new]";
		}

		if (array_key_exists('best', $parm)) {

			$parm["best"] = (int)$parm["best"];

			$condition .= " and best = $parm[best]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' or description LIKE '%$parm[name]%' or description_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		//echo "$query $condition order by `order` <br>";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

 			$gall["level"] = $columns["level"];

			$gall["image"] = $columns["image"];

			$gall["description"] = $columns["description"];

			$gall["description_arabic"] = $columns["description_arabic"];

			$gall["smoll_description"] = $columns["smoll_description"];

			$gall["smoll_description_arabic"] = $columns["smoll_description_arabic"];

			$gall["video"] = $columns["video"];

			$gall["file"] = $columns["file"];

  			$gall["order"] = $columns["order"];

            $gall["background"] = $columns["background"];

			$gall["active"] = $columns["active"];

			$gall["new"] = $columns["new"];

			$gall["price"] = $columns["price"];

			$gall["nprice"] = $columns["nprice"];

			$gall["years"] = $columns["years"];

           			$gall["best"] = $columns["best"];*/

			$gallery[]  = $columns;

			//array_push($gallery, $gall);

		}

		mysqli_free_result($result);

		return $gallery;
	}

	function getservices($parm)

	{

		$query = "SELECT  * FROM `services`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["level"] = $columns["level"];

			$gall["image"] = $columns["image"];

			$gall["description"] = $columns["description"];

			$gall["description_arabic"] = $columns["description_arabic"];

			$gall["smoll_description"] = $columns["smoll_description"];

			$gall["smoll_description_arabic"] = $columns["smoll_description_arabic"];

			$gall["video"] = $columns["video"];

			$gall["file"] = $columns["file"];

			$gall["icon"] = $columns["icon"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getoffer($parm)

	{

		$query = "SELECT  * FROM `offer`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getoffer.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["image"] = $columns["image"];

			$gall["offer_text"] = $columns["offer_text"];

			$gall["offer_textarabic"] = $columns["offer_textarabic"];

			$gall["description"] = $columns["description"];

			$gall["descriptionarabic"] = $columns["descriptionarabic"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getcategorys($parm)

	{

		$query = "SELECT  * FROM `category`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getcategory.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["image"] = $columns["image"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprojects($parm)

	{

		$query = "SELECT  * FROM `projects`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('level', $parm)) {

			$parm["level"] = (int)$parm["level"];

			$condition .= " and level = $parm[level]";
		}

		if (array_key_exists('special', $parm)) {

			$parm["special"] = (int)$parm["special"];

			$condition .= " and special = $parm[special]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["image"] = $columns["image"];

			$gall["smoll_description"] = $columns["smoll_description"];

			$gall["smoll_descriptionarabic"] = $columns["smoll_descriptionarabic"];

			$gall["description"] = $columns["description"];

			$gall["description_arabic"] = $columns["description_arabic"];

			$gall["special"] = $columns["special"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function gethome_block($parm)

	{

		$query = "SELECT  * FROM `home_block`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('name', $parm)) {

			$parm["name"] = mysqli_real_escape_string($this->dbConnection, $parm["name"]);

			$condition .= " and ( name LIKE  '%$parm[name]%' or name_arabic LIKE '%$parm[name]%' ) ";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproducts.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			/*	$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["image"] = $columns["image"];

			$gall["smoll_description"] = $columns["smoll_description"];

			$gall["smoll_description_arabic"] = $columns["smoll_description_arabic"];

  			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);*/

			$gallery[] =      $columns;
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getproduct_box($parm)

	{

		$query = "SELECT  * FROM `product_box`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getproduct_box.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["background"] = $columns["background"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprod_box($parm)

	{

		$query = "SELECT  * FROM `prod_box`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('product_box', $parm)) {

			$parm["product_box"] = (int)$parm["product_box"];

			$condition .= " and product_box = $parm[product_box]";
		}

		if (array_key_exists('products', $parm)) {

			$parm["products"] = (int)$parm["products"];

			$condition .= " and products = $parm[products]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getprod_box.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["product_box"] = $columns["product_box"];

			$gall["products"] = $columns["products"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getproducts_images($parm)

	{

		$query = "SELECT  * FROM `product_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('product_id', $parm)) {

			$parm["product_id"] = (int)$parm["product_id"];

			$condition .= " and product_id = $parm[product_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["image"] = $columns["image"];

			$gall["product_id"] = $columns["product_id"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getfaq_images($parm)

	{

		$query = "SELECT  * FROM `faq_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('faq_id', $parm)) {

			$parm["faq_id"] = (int)$parm["faq_id"];

			$condition .= " and faq_id = $parm[faq_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["image"] = $columns["image"];

			$gall["faq_id"] = $columns["faq_id"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getprojects_images($parm)

	{

		$query = "SELECT  * FROM `projects_images`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (array_key_exists('project_id', $parm)) {

			$parm["project_id"] = (int)$parm["project_id"];

			$condition .= " and project_id = $parm[project_id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["image"] = $columns["image"];

			$gall["project_id"] = $columns["project_id"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getlogos($parm)

	{

		$query = "SELECT  * FROM `logo`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["image"] = $columns["image"];

			$gall["link"] = $columns["link"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getclients($parm)

	{

		$query = "SELECT  * FROM `clients`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getclients.");

			return false;
		}

		$images = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$img["id"] = $columns["id"];

			$img["image"] = $columns["image"];

			$img["link"] = $columns["link"];

			$img["name"] = $columns["name"];

			$img["name_arabic"] = $columns["name_arabic"];

			$img["order"] = $columns["order"];

			$img["active"] = $columns["active"];

			array_push($images, $img);
		}

		mysqli_free_result($result);

		return $images;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getclient_category($parm)

	{

		$query = "SELECT  * FROM `client_category`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getclient_category.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getcertificates_category($parm)

	{

		$query = "SELECT  * FROM `certificates_category`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getcertificates_category.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["name_arabic"] = $columns["name_arabic"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	//***************************************************************************************

	function getproduct_type($parm)

	{

		$query = "SELECT  * FROM `product_type`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["background"] = $columns["background"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	//***************************************************************************************

	function getClients2($parm)

	{

		$query = "SELECT  * FROM `Clients`";

		$condition = "active = 1";

		if (array_key_exists('id', $parm)) {

			$parm["id"] = (int)$parm["id"];

			$condition .= " and id = $parm[id]";
		}

		if (!empty($condition)) {

			$query .= " WHERE ";
		}

		// 	echo $query.$condition." order by `order`";

		$result = $this->DBquery("$query $condition order by `order`");

		if (!$result) {

			$err = $this->DBgetError();

			$this->setError("Error : " . $err["1"]);

			$this->setErrorAr("حدث خطأ بالنظام برجاء الاتصال بمدير الموقع, getgallery.");

			return false;
		}

		$gallery = array();

		while ($columns = $result->fetch_array(MYSQLI_ASSOC)) {

			$gall["id"] = $columns["id"];

			$gall["name"] = $columns["name"];

			$gall["background"] = $columns["background"];

			$gall["order"] = $columns["order"];

			$gall["active"] = $columns["active"];

			array_push($gallery, $gall);
		}

		mysqli_free_result($result);

		return $gallery;
	}

	function getPage($title)

	{

		$title = $this->getSlug($title, true);

		$contents = $this->getEngines(array("title" => $title));

		return $contents[0]["page"];
	}

	function getSlug($t, $re = false)

	{

		if (!$re) {

			$t = trim($t);

			$t = str_replace(array("'", '"', "&", ",", ":", "-", ".", "»", "«"), "", $t);
		}

		if ($re)

			return str_replace("-", " ", $t);

		$t = str_replace("  ", "-", $t);

		return str_replace(" ", "-", $t);
	}

	function strclean($string)

	{

		$string = str_replace(' ', '-', $string); // Replaces all spaces with hyphens.

		return preg_replace('/[^A-Za-z0-9\-]/', '', $string); // Removes special chars.

	}

	public $pageTitle = "";

	function getPageUrl($key, $tag = "", $full = false)

	{

		global $PUr;

		global $_affiliate;

		$php = true;

		if ($full)

			$key = $PUr . "/" . $key;

		/*    if(strpos($tag,"company") !== false)

    $key = "companies";*/

		if (strpos($tag, "cat") !== false)

			$key = "categories";

		if (strpos($tag, "myorders") !== false) {

			$key = "orders";

			$tag = ($_affiliate ? "?affiliate=1" : "");
		}

		if (strpos($tag, "?deal") !== false) {

			$key = "offers";

			$tag = "";
		}

		if (strpos($tag, "?new") !== false) {

			$key = "newproducts";

			$tag = "";
		}

		if (strpos($tag, "?best") !== false) {

			$key = "bestselling";

			$tag = "";
		}

		if (strpos($tag, "wishlist") !== false) {

			$key = "wishlist";

			$tag = "";
		}

		global $plang;

		$key .= $plang;

		$contents = $this->getEngines(array("page" => $key . ($php ? ".php" : "")));

		$this->pageTitle = $contents[0]["title"];

		return $key . ".php" . $tag;

		return $key . "_" . $this->getSlug($contents[0]["title"]) . $tag;
	}

	function getBlogUrl($id, $app = false, $page = false)

	{

		//$PUr = $Port.$_SERVER['HTTP_HOST'].'/';

		//  $app = ($app == false?"p":($app === true || $app === "true"?"c":$app));

		global $plang;

		$app .= $plang;

		$slug = "_khedr_company_working_in_HVAC_systems";

		if (strpos($page, "arabic") !== false)

			$slug = "ثري دي لايف لتنفيذ جميع انواع المجسمات المعمارية و الفنية و الهندسية باحدث تكنولوجيا العصر";

		return  $app . ".php?level=" . $id[0];

		return $app . "" . $id[0] . "_" . str_replace("/", "", $this->getSlug($id[1]));
	}

	function getBlogUrl2($id, $app = false, $page = false)

	{

		//$PUr = $Port.$_SERVER['HTTP_HOST'].'/';

		$app = ($app == false ? "p" : ($app === true || $app === "true" ? "c" : $app));

		if ($app == "p")

			$blog = $this->getBlog(array("id" => $id));

		else if ($app == "g")

			$blog = $this->getgallery(array("id" => $id));

		else if ($app == "ph")

			$blog = $this->getPhoto(array("id" => $id));

		else if ($app == "v")

			$blog = $this->getvideo(array("id" => $id));

		else

			$blog = $this->getCat(array("id" => $id));

		//return $app."/".$id."/".$this->getSlug($blog[0]["name"]);

		if ($page)

			return $app . "" . $id . "-page" . $page . "-" . $this->getSlug($blog[0]["name"]);

		return $app . "" . $id . "-" . $this->getSlug($blog[0]["name"]);
	}

	//***************************************************************************************

}

function isv($is = '', $a = false)

{

	if (isset($_POST[$is]) and !$a) {

		return $_POST[$is];
	} elseif (isset($_GET[$is])) {

		return $_GET[$is];
	}

	return false;
}

function getCurrent($cur, $pagg = false)

{

	if (!$pagg)

		global $pagg;

	if ($pagg == $cur) {

		// if($cur == 3)

		return 'menu-active';

		//return 'class="current"';

	}
}

function getValue($key, $type = false)

{

	global  $core;

	$info_media['code'] = $key;

	if ($type) {

		$contents = $core->getStaticPage($info_media);

		return $contents[0][$type];
	} else

		$contents = $core->getinfo_media($info_media);

	return $contents[0]['link'];
}

function getLang($key)

{

	global  $core;

	global $lang;

	$key = $key . ($lang == "arabic" ? $lang : "") . '.php';

	$contents = $core->getData("searchengine", "where page='" . $key . "'");

	return $contents[0]['title'];
}

function getTitle($key, $val = "title", $php = true)

{

	global  $core;

	global  $plang;

	//$key = $key."arabic";

	$contents = $core->getEngines(array("page" => $key . $plang . ($php ? ".php" : "")));

	return $contents[0][$val];
}

function limit_str($text, $limit, $d = false)

{

	$m = explode(" ", $text);

	if (count($m) > $limit) {

		$y = array();

		for ($t = 0; $t <= ($limit - 1); $t++) {

			$y[$t] = $m[$t];
		}

		$b = implode(" ", $y);

		if (!$d) {

			$b .= " ...";
		}
	} else {

		$b = $text;
	}

	return strip_tags($b);
}

function getDateTime($str, $lang)

{

	$times = (explode("-", $str));

	$months = array("01" => "Jan", "02" => "Feb", "03" => "Mar", "04" => "Apr", "05" => "May", "06" => "Jun", "07" => "Jul", "08" => "Aug", "09" => "Sep", "10" => "Oct", "11" => "Nov", "12" => "Dec");

	if ($lang == "arabic")

		$months = array("01" => "يناير", "02" => "فبراير", "03" => "مارس", "04" => "ابريل", "05" => "مايو", "06" => "يونيو", "07" => "يوليو", "08" => "اغسطس", "09" => "سبتمبر", "10" => "اكتوبر", "11" => "نوفمبر", "12" => "ديسمبر");

	return array($times[1], $months[$times[1]], $times[0]);
}

function calculateMiniCashValue($itemPrice, $installmentNumber, $interestRate = 2.0000, $downPayment = 0)

{

	$itemPrice = $itemPrice * 1.0;

	$iv = (($itemPrice * $installmentNumber * $interestRate) / 100);

	$im = ($iv + $itemPrice) / $installmentNumber; // installments monthly

	$installmentNumber = ceil($im);

	return $installmentNumber;
}

if (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] != 'off') {

	$Port = 'https://';
} else {

	$Port = 'http://';
}

$PUr = $Port . $_SERVER['HTTP_HOST'] . '/';

$FUr = $Port . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];

$url_ep = explode("/", $FUr);

if (count($url_ep) >= 5) {

	$PUr = $PUr . $url_ep[3];
}

$qu = (strpos($FUr, "=") !== false);

if ($qu) {

	$qu = explode("?", $FUr)[1];

	//$qu = explode("=",$qu)[0];

	$qu = (in_array($qu, array("id", "level")) ? false : $qu);
}

function getKey($r = false)

{

	global $core;

	$ar = array("new", "best", "deal", "cat", "company", "q", "wishlist", "myorders", "products", "rest", "forgot", "out");

	foreach ($_GET as $k => $v) {

		if (in_array($k, $ar)) {

			if ($k == "cat") {

				$data = $core->getCat(array("level" => $v));

				$str = "";

				for ($i = 0; $i < count($data); $i++) {

					$str .= (!$i ? "(" : "") . " level = " . $data[$i]["id"] . " or ";

					//$str .=(?" or ":"");

					//$str .=($i >= (count($data)-1)?"":" or ");

				}
			}

			$k = ($k == "cat" ? "level" : $k);

			if ($r)

				return $str . $k . " = " . $v . ($str ? " ) " : "");

			return  $k;
		}
	}

	return false;
}

function getRealUrl($key)

{

	global $core;

	return $PUr;
}

function plang($key, $key2)

{

	global $plang;

	if (!$plang)

		$plang = isv("plang");

	return ($plang ? $key : $key2);
}

function iswish($id)

{

	global $core;

	$wishlist =   $core->Sion("wishlist");

	if (in_array($id, explode(",", $wishlist)))

		return "iswish";

	return  "";
}

function qty($id)

{

	global $core;

	$wishlist =   $core->Sion("cartlist");

	$qt = 1;

	foreach (explode(",", $wishlist) as $v) {

		if (strpos($v, "q" . $id) !== false)

			$qt = explode("-", $v)[1];
	}

	return  $qt;
}

function expiry_date($data, $def = "stock", $ar = false)

{

	if ($data["expiry_date"] && $data["deal"]) {

		$def = ((date_create() > date_create($data["expiry_date"]) && !$data["stock"]) ? $def : "");
		if ($ar)
			return [(date_create() > date_create($data["expiry_date"])), $def];
		return $def;
	}
	if ($ar)
		return [0, ""];
	return "";
}

function alert($key, $a = false)

{

	global $_affiliate;

	if ($key == "q")

		echo '<div class="clearfix"></div><div class="alert alert-danger justify-content-center" role="alert">

    ' . plang("عذرا لم يتم العثور على منتجات مطابقه لبحثك ", "Sorry, no products were found matching your search") . '

</div>';

	else if ($a)

		echo '<div class="clearfix"></div><div class="alert alert-danger justify-content-center" role="alert">

  ' . $key . '

</div>';

	else  if ($_affiliate)

		echo '<div class="clearfix"></div><div class="alert alert-danger justify-content-center" role="alert">

    ' . plang("لم يتم العثور  على اى طلبات   ", "No requests were found") . '

</div>';

	else

		echo '<div class="clearfix"></div><div class="alert alert-danger justify-content-center" role="alert">

   ' . plang("عذرا لم يتم العثور على منتجات ", "Sorry, no products were found") . '

</div>';
}
